<!doctype html>
<html lang="en-AU" dir="ltr" class="docs-wrapper plugin-docs plugin-id-general docs-version-current docs-doc-page docs-doc-id-development/tools/behat/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Behat | Moodle Developer Resources</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat"><meta data-rh="true" property="og:locale" content="en_AU"><meta data-rh="true" name="docusaurus_locale" content="en-AU"><meta data-rh="true" name="docsearch:language" content="en-AU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-general-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-general-current"><meta data-rh="true" property="og:title" content="Behat | Moodle Developer Resources"><meta data-rh="true" name="description" content="This page describes the internals of Behat and the integration with Moodle."><meta data-rh="true" property="og:description" content="This page describes the internals of Behat and the integration with Moodle."><link data-rh="true" rel="icon" href="/moodledevdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat"><link data-rh="true" rel="alternate" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat" hreflang="en-AU"><link data-rh="true" rel="alternate" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NNUY2D5GV2-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L9EE8RW5B1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L9EE8RW5B1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Moodle Developer Resources" href="/moodledevdocs/opensearch.xml">

<link rel="icon" href="/moodledevdocs/img/icons/orange_m.svg">
<link rel="manifest" href="/moodledevdocs/manifest.json">
<meta name="theme-color" content="rgb(208, 99, 0)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/moodledevdocs/img/icons/maskable_icon.png">
<link rel="mask-icon" href="/moodledevdocs/img/icons/maskable_icon.png" color="rgb(208, 99, 0)">
<meta name="msapplication-TileImage" content="/moodledevdocs/img/icons/maskable_icon.png">
<meta name="msapplication-TileColor" content="#000">

<script src="https://zipchat.ai/widget/zipchat.js?id=gQKDVDpI9xQWW4n04W4K" defer="defer"></script><link rel="stylesheet" href="/moodledevdocs/assets/css/styles.cca56588.css">
<script src="/moodledevdocs/assets/js/runtime~main.29916bfb.js" defer="defer"></script>
<script src="/moodledevdocs/assets/js/main.63ca6e29.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="moodlesitestopnavbar_Frnu"><button class="mobile_menu_jwKm" type="button" aria-label="Toggle navigation"><span class="fa_waffle_mobile_mW1T"></span></button><a href="https://moodle.org" class="navbar-brand position-lg-fixed d-none d-lg-flex align-items-center m-0 p-0 aabtn"><img src="https://moodle.org/theme/moodleorg/pix/moodle_logo_TM.svg" class="nav_logo_TBny" height="32px" alt="Moodle.org"></a><div class="navbar_wrapper_BLET" id="navbar_wrapper"><ul class="navbar_nav_t6hh"><li><a class="nav_link_MbBP" href="https://moodle.org/course"><span>Forums</span></a></li><li><a class="nav_link_MbBP" href="https://docs.moodle.org"><span>Documentation</span></a></li><li><a class="nav_link_MbBP" href="https://download.moodle.org"><span>Downloads</span></a></li><li><a class="nav_link_MbBP" href="https://moodle.org/demo"><span>Demo</span></a></li><li><a class="nav_link_MbBP" href="https://tracker.moodle.org"><span>Tracker</span></a></li><li><a class="nav_link_MbBP" href="https://moodledev.io/"><span>Development</span></a></li><li><a class="nav_link_MbBP" href="https://lang.moodle.org"><span>Translation</span></a></li><div class="extra_links_K5sj"><hr height="8px" style="margin:0.5rem"><li><a class="nav_link_MbBP" href="https://moodle.org/public/search"><i class="fa_search_d6Q5" style="margin-right:0.5rem"></i>Search</a></li><li><button class="nav_link_MbBP" type="button"><i class="fa_waffle_HYQ3" style="margin-right:0.5rem"></i>Moodle Sites<i class="fa_arrow_r_hbkJ" style="margin-left:1rem"></i></button></li></div><li class="search_bDdD"><a class="nav_link_MbBP" href="https://moodle.org/public/search" aria-label="Search moodle.org"><i class="fa_search_d6Q5"></i></a></li><li class="waffle_SC1o"><button class="nav_link_MbBP" type="button" aria-label="Toggle sites menu"><i class="fa_waffle_HYQ3"></i></button></li><div class="moodle_sites_pA64" id="waffle_menu"><div class="pathways_Gtf7"><div class="heading_y6w7">What are you looking for?</div><hr><p>Learn about Moodle&#x27;s products, like Moodle LMS or Moodle Worplace, or find a Moodle Certified Service Provider.<br><br><a href="https://moodle.com">Moodle.com<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p><hr><p>Our social network to share and curate open educational resources.<br><br><a href="https://moodle.net">MoodleNet<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p><hr><p>Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.<br><br><a href="https://moodle.academy">Moodle Academy<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p></div></div></ul><ul class="sites_nav_zUr9" id="sites-nav"><button class="nav_link_MbBP" type="button" aria-label="Close sites menu"><i class="fa_arrow_left_jgS9" style="margin-left:-0.6rem"></i></button><div class="pt-2 pathways"><p><a href="https://moodle.com">Moodle.com</a><br>Learn about Moodle&#x27;s products, like Moodle LMS or Moodle Worplace, or find a Moodle Certified Service Provider.<br></p><hr><p><a href="https://moodle.net">MoodleNet</a><br>Our social network to share and curate open educational resources.<br></p><hr><p><a href="https://moodle.academy">Moodle Academy</a><br>Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.<br></p></div></ul></div></nav><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__item navbar__link" href="/moodledevdocs/docs/4.4">Guides</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/community/contribute">Community</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/development/gettingstarted">Coding</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/development/process">Process</a></div><div class="navbar__items navbar__items--right"><div class="wrapper_Jz6K"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/moodledevdocs/general/development/gettingstarted">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/moodledevdocs/general/development/policies">Policies</a><button aria-label="Expand sidebar category &#x27;Policies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/moodledevdocs/general/development/tools">Tools</a><button aria-label="Collapse sidebar category &#x27;Tools&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/moodledevdocs/general/development/tools/behat">Behat</a><button aria-label="Collapse sidebar category &#x27;Behat&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/behat/running">Running acceptance tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/behat/writing">Writing acceptance tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/moodledevdocs/general/development/tools/behat/browsers">Browsers</a><button aria-label="Expand sidebar category &#x27;Browsers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/cibot">Automated code review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/component-library">Component library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/composer">Composer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/exceptiontracing">Exception Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/generator">Generator tool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/gha">GitHub Actions integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/gitpod">Gitpod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/mdk">Moodle Development Kit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/metadata">Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/nodejs">NodeJS and Grunt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/phpcs">PHP CodeSniffer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/phpunit">PHPUnit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/xmldb">XMLDB editor</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/moodledevdocs/general/development/abc">Advice</a><button aria-label="Expand sidebar category &#x27;Advice&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/moodledevdocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/moodledevdocs/general/development/tools"><span itemprop="name">Tools</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Behat</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Behat</h1></header>
<p>This page describes the internals of Behat and the integration with Moodle.</p>
<p>Behat is a framework for behavior driven development (BDD) which allows us to specify Moodle functionalities (aka features) as a human-readable list of steps. It parses these steps to executable actions to simulate user interaction against headless browsers (without JavaScript support, only curl-kind requests) or user simulation tools like Selenium, which interacts with browsers and allows JavaScript events simulation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="objective">Objective<a href="#objective" class="hash-link" aria-label="Direct link to Objective" title="Direct link to Objective">​</a></h2>
<p>The aim of this integration is to allow Moodle components to have its own set of features and step definitions. This allows us to periodically execute sets of tests to detect regressions and Moodle features in different environments (browsers, DBs engines, web servers...). The Moodle QA tests will be progressively rewritten according to this format to run automatically.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-behat-works">How Behat works<a href="#how-behat-works" class="hash-link" aria-label="Direct link to How Behat works" title="Direct link to How Behat works">​</a></h2>
<p>This section aims to explain the basics about BDD and Behat and a quick view of how Behat internally works from the CLI command execution to the results output.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Note that all those examples are not necessarily real nor part of the suite, they are meant to help understand the concepts, see <a href="/moodledevdocs/general/development/tools/behat/running">Acceptance testing</a> for real examples</p></div></div>
<p>Some terms used:</p>
<ul>
<li>
<p><strong>Features</strong>: Human-readable list of scenarios that describes a feature</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">@auth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token feature keyword" style="color:#00009f">Feature:</span><span class="token feature important"> Login</span><span class="token feature"></span><br></span><span class="token-line" style="color:#393A34"><span class="token feature">  In order to login</span><br></span><span class="token-line" style="color:#393A34"><span class="token feature">  As a moodle user</span><br></span><span class="token-line" style="color:#393A34"><span class="token feature">  I need to be able to validate the username and password against moodle</span><br></span><span class="token-line" style="color:#393A34"><span class="token feature"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token scenario keyword" style="color:#00009f">Scenario:</span><span class="token scenario important"> Login as an existing user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Given</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> am on </span><span class="token string" style="color:#e3116c">&quot;login/index.php&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">When</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> press </span><span class="token string" style="color:#e3116c">&quot;loginbtn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Then</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> should see </span><span class="token string" style="color:#e3116c">&quot;Moodle 101: Course Name&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token scenario keyword" style="color:#00009f">Scenario:</span><span class="token scenario important"> Login as an non-existing user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Given</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> am on </span><span class="token string" style="color:#e3116c">&quot;login/index.php&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">When</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> press </span><span class="token string" style="color:#e3116c">&quot;loginbtn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Then</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> should see </span><span class="token string" style="color:#e3116c">&quot;Invalid login&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Scenario</strong>: Human-readable list of steps to describe an expected behaviour</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token scenario keyword" style="color:#00009f">Scenario:</span><span class="token scenario important"> Login as an existing user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Given</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> am on </span><span class="token string" style="color:#e3116c">&quot;login/index.php&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">When</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> fill in </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> press </span><span class="token string" style="color:#e3116c">&quot;loginbtn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atrule" style="color:#00a4db">Then</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> should see </span><span class="token string" style="color:#e3116c">&quot;Moodle 101: Course Name&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Steps</strong>: Human-readable sentences that describe an action. There are 3 types of steps, <code>Given</code> describing the initial context, <code>When</code> the event that provokes a change and <code>Then</code> where the outcomes should be asserted.</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I click on the </span><span class="token string" style="color:#e3116c">&quot;Add user&quot;</span><span class="token plain"> button</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Steps definitions</strong>: PHP methods referenced by steps when matching its regular expression. The <code>@Given</code>, <code>@When</code> and <code>@Then</code> tags are descriptive and they are not taken into account when matching steps with steps definitions. The regular expressions placeholders are returned to the PHP method as arguments so methods can use them to tell the browser which button (for example) they want to click.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">- @When /^I click on the &quot;(.*)&quot; button$/</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">i_click_on_the_button</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$button</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Simulates the user interaction (see Mink description below for more info)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token variable" style="color:#36acaa">$this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getPage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">pressButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$button</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<ul>
<li><strong>Behat</strong>: PHP framework and CLI application that wraps the whole process of features files loading + features files parsing + execution of actions in the browser + results output (<a href="http://behat.org/" target="_blank" rel="noopener noreferrer">http://behat.org/</a>)</li>
<li><strong>Gherkin</strong>: Human-readable language used to define features that can be parsed and translated into PHP methods. For more info, it&#x27;s the same language used by Cucumber, the BDD Ruby framework (<a href="https://github.com/cucumber/cucumber/wiki/Gherkin" target="_blank" rel="noopener noreferrer">https://github.com/cucumber/cucumber/wiki/Gherkin</a>)</li>
<li><strong>Context</strong>: In Behat scope a context is a PHP class that groups steps definitions (as methods)</li>
<li><strong>Mink</strong>: Is the component which interacts with browsers, simulating a real user interaction. It allows us to write PHP code (or use the available PHP methods) to send requests to the different browsers APIs through a common interface or extend it to allow browser-specific actions. The supported browsers includes Selenium, Selenium2, Sahi... <a href="http://mink.behat.org/" target="_blank" rel="noopener noreferrer">http://mink.behat.org/</a></li>
<li><strong>Selenium 2</strong>: Web browser automation tool, applications like Mink can communicate with it through a RESTful API (<a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol" target="_blank" rel="noopener noreferrer">http://code.google.com/p/selenium/wiki/JsonWireProtocol</a>) to execute actions simulating user interaction.</li>
<li><strong>Selector type</strong>: Related with <strong>locator</strong>, is a way to select a node inside the page DOM</li>
<li><strong>Locator</strong>: Is what we are looking for inside the page DOM, it completely depends on the associated selector type, a few examples of it:<!-- -->
<ul>
<li>Selector type = <code>&quot;link&quot;</code>, Locator = <code>&quot;Link text&quot;</code></li>
<li>Selector type = <code>&quot;field&quot;</code>, Locator = <code>&quot;Field legend text&quot;</code></li>
<li>Selector type = <code>&quot;css&quot;</code>, Locator = <code>&quot;.css-class #id&quot;</code></li>
<li>Selector type = <code>&quot;xpath&quot;</code>, Locator = <code>&quot;//input[](@id=&#x27;id-value&#x27;)&quot;</code>
All these components are written in PHP, open sourced and packaged in a single and extensible framework.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-view-of-the-whole-process">Quick view of the whole process<a href="#quick-view-of-the-whole-process" class="hash-link" aria-label="Direct link to Quick view of the whole process" title="Direct link to Quick view of the whole process">​</a></h3>
<ol>
<li>Behat CLI execution<!-- -->
<ul>
<li>Behat application initialization and loading of arguments (features files to execute, output format...)</li>
<li>Reads the Behat config file (browser servers are specified here)</li>
<li>Extensions overrides management</li>
<li>Gherkin initialization</li>
</ul>
</li>
<li>Features files selection<!-- -->
<ul>
<li>According to the arguments Gherkin looks for .features files<!-- -->
<ul>
<li>It can use different features loaders (single file, a directory, the default directory...)</li>
<li>The framework can be extended to allow multiple folders loading</li>
</ul>
</li>
</ul>
</li>
<li>Features parsing (Gherkin)<!-- -->
<ul>
<li>Loops through the loaded features files looking for scenarios</li>
<li>Gets the list of steps of each scenario</li>
<li>There are hooks at different levels (<a href="https://docs.behat.org/en/latest/user_guide/context/hooks.html" target="_blank" rel="noopener noreferrer">https://docs.behat.org/en/latest/user_guide/context/hooks.html</a>)</li>
</ul>
</li>
<li>Steps parsing (Gherkin)<!-- -->
<ul>
<li>Gherkin looks in the available steps definitions for a regular expression that matches the step text</li>
</ul>
</li>
<li>Step definition execution<!-- -->
<ul>
<li>The step definition code is executed</li>
<li>Steps definitions most of the time uses the Mink component to communicate with the browser API sending requests like &quot;click on that button&quot; or &quot;go to XXX page&quot;</li>
</ul>
</li>
<li>Scenario outcomes<!-- -->
<ul>
<li>The scenario counts as failed if an exception is thrown when executing a step definition (for example trying to click a non-existing button)</li>
<li>The scenario counts as passed if no exception is thrown during it&#x27;s steps execution</li>
</ul>
</li>
<li>Finishing CLI execution<!-- -->
<ul>
<li>A summary with all the scenario results is displayed</li>
<li>It accepts different output formats (like JUnitXML) to it&#x27;s execution in continuous integration systems (<a href="http://docs.behat.org/guides/6.cli.html#format-options" target="_blank" rel="noopener noreferrer">http://docs.behat.org/guides/6.cli.html#format-options</a>)</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="moodle-integration">Moodle integration<a href="#moodle-integration" class="hash-link" aria-label="Direct link to Moodle integration" title="Direct link to Moodle integration">​</a></h2>
<p>It follows the approach chosen with PHPUnit:</p>
<ul>
<li>It comes disabled by default, Behat is not included within Moodle and it has to be installed separately with the composer installer</li>
<li>Moodle components (subsystems and plugins) can have a tests/behat/ folder</li>
<li>The scenarios are executed in a test environment, the production database and dataroot are not affected by the tests modifications</li>
<li>The scenarios specifies their own fixtures and it&#x27;s execution is isolated from other scenarios and features, resetting the test database and the test dataroot before each scenario</li>
<li>Moodle lists the features files and steps definitions of it&#x27;s components in a behat.yml file, similar to the phpunit.xml manifest</li>
<li>A basic behat.yml.dist config file has been included</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-environment">Alternative environment<a href="#alternative-environment" class="hash-link" aria-label="Direct link to Alternative environment" title="Direct link to Alternative environment">​</a></h3>
<p>Acceptance testing implies interaction with the browser like real users does, so it requires the site to be accessible via URL. The Moodle integration creates a new moodle site installation in parallel to the production one to run the tests in a sandbox without affecting the production environment, switching the regular <code>$CFG-&gt;wwwroot</code>, <code>$CFG-&gt;dataroot</code> and <code>$CFG-&gt;prefix</code> to alternatives, which should be only accessible from localhost or internal networks. Info about how to run the tests in <a href="/moodledevdocs/general/development/tools/behat/running">Running acceptance test</a>.</p>
<p>This default configuration is useful when developing in a local host, but to run the tests automatically with Jenkins, GHA, Saucelabs... or other CI systems we provide a few extra settings.</p>
<p>All the behat CLI utilities we provide within the Moodle codebase (admin/tool/behat/cli/*) are using <code>$CFG-&gt;behat_wwwroot</code>, <code>$CFG-&gt;behat_prefix</code> and <code>$CFG-&gt;behat_dataroot</code> instead of <code>$CFG-&gt;wwwroot</code>, <code>$CFG-&gt;prefix</code> and <code>$CFG-&gt;dataroot</code>, this scripts are self-contained, but as we are accessing through a browser, we also need to switch the whole Moodle instance to test mode. For this there are two requirements:</p>
<ul>
<li>Test mode is enabled if<!-- -->
<ul>
<li><strong>php admin/tool/behat/cli/init.php</strong> or <strong>php admin/tool/behat/cli/util.php --enable</strong> has been executed</li>
</ul>
</li>
<li>Test mode is requested if<!-- -->
<ul>
<li>The vendor/bin/behat command is running, we know it because we hook the Behat process before the tests begins to run, and we require moodle <code>config.php</code> after it</li>
<li>We set <code>$CFG-&gt;behat_wwwroot</code> in <code>config.php</code> and we are accessing the moodle instance through it
The unique <code>$CFG-&gt;behat_wwwroot</code> prevents unintended execution of acceptance tests on production sites.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="javascript">JavaScript<a href="#javascript" class="hash-link" aria-label="Direct link to JavaScript" title="Direct link to JavaScript">​</a></h3>
<p>There are two types of tests depending on if their scenario needs a real browser capable of execute JavaScript or if they can run in a headless browser.</p>
<ul>
<li>Tests with JavaScript requires interaction with a browser through a user simulation tool like Selenium or ZombieJS to be executed; see <a href="http://mink.behat.org/#different-browsers-drivers" target="_blank" rel="noopener noreferrer">http://mink.behat.org/#different-browsers-drivers</a> for all available drivers</li>
<li>Test that does not requires JavaScript are faster to run but can not test rich applications like Moodle</li>
</ul>
<p>In most of the cases a JavaScript test would be more appropriate because most of the users uses JavaScript-capable browsers, non-JavaScript tests can be useful to ensure that Moodle maintains its functionality without JavaScript enabled and to ensure there are no big issues, regressions or exceptions in general.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="admin-tool-acceptance-testing">Admin tool &quot;Acceptance testing&quot;<a href="#admin-tool-acceptance-testing" class="hash-link" aria-label="Direct link to Admin tool &quot;Acceptance testing&quot;" title="Direct link to Admin tool &quot;Acceptance testing&quot;">​</a></h3>
<p>There is an admin tool to run and ease the creation of acceptance tests.</p>
<ul>
<li>Web interface: The web interface allows you to list and filter the available steps definitions, a non-technical user can use this interface to write new features (<code>admin/tool/behat/index.php</code>)</li>
<li>CLI: Command to enable and disable the test environment and to update the <code>behat.yml</code> file with the system tests and steps definitions (<code>admin/tool/behat/cli/util.php</code> and <code>admin/tool/behat/cli/init.php</code> for a quick start)
<img decoding="async" loading="lazy" alt="Acceptance_testing_UI_4.0.png" src="/moodledevdocs/assets/images/Acceptance_testing_UI_4.0-74cb2dfd5732e2cd32e20b0026c827e0.png" width="1707" height="831" class="img_ev3q"></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="available-steps-to-create-tests">Available steps to create tests<a href="#available-steps-to-create-tests" class="hash-link" aria-label="Direct link to Available steps to create tests" title="Direct link to Available steps to create tests">​</a></h3>
<p>There are behat libraries with tons of steps definitions to run all sort of processes and interactions with the browser, some of them overlaps Moodle-specific libraries and tests writers can be confused not only by this also by the amount of steps and vague or too technical steps descriptions. Moodle provides a set of steps definitions written in a common format to make tests writers life easier. New steps definitions must follow these <a href="/moodledevdocs/general/development/tools/behat/writing#writing-new-acceptance-test-step-definitions">guidelines</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="behat-extension">Behat extension<a href="#behat-extension" class="hash-link" aria-label="Direct link to Behat extension" title="Direct link to Behat extension">​</a></h3>
<p>A new Behat extension (<a href="https://github.com/moodlehq/moodle-behat-extension" target="_blank" rel="noopener noreferrer">https://github.com/moodlehq/moodle-behat-extension</a>) has been created to maintain Behat and its dependencies as they comes from upstream.</p>
<p>The aim of this extension is:</p>
<ul>
<li>Load features from multiple folders (Moodle subsystems and plugins)</li>
<li>Load steps definitions from multiple folders and add them as subcontexts (Moodle subsystems and plugins)</li>
<li>Return the available steps definitions in a more human-readable format without regexps</li>
<li>Look for exceptions, debugging() calls, PHP error messages and other backtraces in Moodle&#x27;s output</li>
<li>Extend the Selenium2 behat driver to allow extra Selenium capabilities</li>
<li>Add a new formatter method based on progress (the moodle default one) to display info about the moodle site being tested
All the other particularities of this integration can managed playing with different Behat config parameters.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="translations">Translations<a href="#translations" class="hash-link" aria-label="Direct link to Translations" title="Direct link to Translations">​</a></h2>
<ul>
<li><a href="https://docs.moodle.org/es/Behat" target="_blank" rel="noopener noreferrer">es - Behat</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/quality-assurance">Quality Assurance</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/testing">Testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/behaviour-testing">Behaviour testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/behat">Behat</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/moodle/devdocs/edit/main/general/development/tools/behat/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-03-24T09:56:47.000Z" itemprop="dateModified">24 Mar 2023</time></b> by <b>Eloy Lafuente (stronk7)</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/moodledevdocs/general/development/tools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Development tools</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/moodledevdocs/general/development/tools/behat/running"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running acceptance tests</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective" class="table-of-contents__link toc-highlight">Objective</a></li><li><a href="#how-behat-works" class="table-of-contents__link toc-highlight">How Behat works</a><ul><li><a href="#quick-view-of-the-whole-process" class="table-of-contents__link toc-highlight">Quick view of the whole process</a></li></ul></li><li><a href="#moodle-integration" class="table-of-contents__link toc-highlight">Moodle integration</a><ul><li><a href="#alternative-environment" class="table-of-contents__link toc-highlight">Alternative environment</a></li><li><a href="#javascript" class="table-of-contents__link toc-highlight">JavaScript</a></li><li><a href="#admin-tool-acceptance-testing" class="table-of-contents__link toc-highlight">Admin tool &quot;Acceptance testing&quot;</a></li><li><a href="#available-steps-to-create-tests" class="table-of-contents__link toc-highlight">Available steps to create tests</a></li><li><a href="#behat-extension" class="table-of-contents__link toc-highlight">Behat extension</a></li></ul></li><li><a href="#translations" class="table-of-contents__link toc-highlight">Translations</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Moodle</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/releases">Release notes</a></li><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/projects">Projects</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/documentation">Developer docs</a></li><li class="footer__item"><a href="https://docs.moodle.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legacy docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/documentation/code-of-conduct">Code of conduct</a></li><li class="footer__item"><a href="https://moodle.org/mod/forum/view.php?id=55" target="_blank" rel="noopener noreferrer" class="footer__link-item">General Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                    <a href="https://www.netlify.com" target="_blank" rel="noreferrer noopener" aria-label="Deploys by Netlify">
                        <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51">
                    </a>
                    </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2024 Moodle Pty Ltd. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>