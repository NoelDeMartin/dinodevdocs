<!doctype html>
<html lang="en-AU" dir="ltr" class="docs-wrapper plugin-docs plugin-id-general docs-version-current docs-doc-page docs-doc-id-development/tools/behat/writing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Writing acceptance tests | Moodle Developer Resources</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat/writing"><meta data-rh="true" property="og:locale" content="en_AU"><meta data-rh="true" name="docusaurus_locale" content="en-AU"><meta data-rh="true" name="docsearch:language" content="en-AU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-general-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-general-current"><meta data-rh="true" property="og:title" content="Writing acceptance tests | Moodle Developer Resources"><meta data-rh="true" name="description" content="This documentation gives some hints on writing behat tests for Moodle core, and for plugins. The focus of the documentation is on behat tests for plugins. Behat Features and Scenarios are written in a natural language, and should"><meta data-rh="true" property="og:description" content="This documentation gives some hints on writing behat tests for Moodle core, and for plugins. The focus of the documentation is on behat tests for plugins. Behat Features and Scenarios are written in a natural language, and should"><link data-rh="true" rel="icon" href="/moodledevdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat/writing"><link data-rh="true" rel="alternate" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat/writing" hreflang="en-AU"><link data-rh="true" rel="alternate" href="https://noeldemartin.github.io/moodledevdocs/general/development/tools/behat/writing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NNUY2D5GV2-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L9EE8RW5B1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L9EE8RW5B1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Moodle Developer Resources" href="/moodledevdocs/opensearch.xml">

<link rel="icon" href="/moodledevdocs/img/icons/orange_m.svg">
<link rel="manifest" href="/moodledevdocs/manifest.json">
<meta name="theme-color" content="rgb(208, 99, 0)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/moodledevdocs/img/icons/maskable_icon.png">
<link rel="mask-icon" href="/moodledevdocs/img/icons/maskable_icon.png" color="rgb(208, 99, 0)">
<meta name="msapplication-TileImage" content="/moodledevdocs/img/icons/maskable_icon.png">
<meta name="msapplication-TileColor" content="#000">

<script src="https://zipchat.ai/widget/zipchat.js?id=gQKDVDpI9xQWW4n04W4K" defer="defer"></script><link rel="stylesheet" href="/moodledevdocs/assets/css/styles.cca56588.css">
<script src="/moodledevdocs/assets/js/runtime~main.29916bfb.js" defer="defer"></script>
<script src="/moodledevdocs/assets/js/main.63ca6e29.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="moodlesitestopnavbar_Frnu"><button class="mobile_menu_jwKm" type="button" aria-label="Toggle navigation"><span class="fa_waffle_mobile_mW1T"></span></button><a href="https://moodle.org" class="navbar-brand position-lg-fixed d-none d-lg-flex align-items-center m-0 p-0 aabtn"><img src="https://moodle.org/theme/moodleorg/pix/moodle_logo_TM.svg" class="nav_logo_TBny" height="32px" alt="Moodle.org"></a><div class="navbar_wrapper_BLET" id="navbar_wrapper"><ul class="navbar_nav_t6hh"><li><a class="nav_link_MbBP" href="https://moodle.org/course"><span>Forums</span></a></li><li><a class="nav_link_MbBP" href="https://docs.moodle.org"><span>Documentation</span></a></li><li><a class="nav_link_MbBP" href="https://download.moodle.org"><span>Downloads</span></a></li><li><a class="nav_link_MbBP" href="https://moodle.org/demo"><span>Demo</span></a></li><li><a class="nav_link_MbBP" href="https://tracker.moodle.org"><span>Tracker</span></a></li><li><a class="nav_link_MbBP" href="https://moodledev.io/"><span>Development</span></a></li><li><a class="nav_link_MbBP" href="https://lang.moodle.org"><span>Translation</span></a></li><div class="extra_links_K5sj"><hr height="8px" style="margin:0.5rem"><li><a class="nav_link_MbBP" href="https://moodle.org/public/search"><i class="fa_search_d6Q5" style="margin-right:0.5rem"></i>Search</a></li><li><button class="nav_link_MbBP" type="button"><i class="fa_waffle_HYQ3" style="margin-right:0.5rem"></i>Moodle Sites<i class="fa_arrow_r_hbkJ" style="margin-left:1rem"></i></button></li></div><li class="search_bDdD"><a class="nav_link_MbBP" href="https://moodle.org/public/search" aria-label="Search moodle.org"><i class="fa_search_d6Q5"></i></a></li><li class="waffle_SC1o"><button class="nav_link_MbBP" type="button" aria-label="Toggle sites menu"><i class="fa_waffle_HYQ3"></i></button></li><div class="moodle_sites_pA64" id="waffle_menu"><div class="pathways_Gtf7"><div class="heading_y6w7">What are you looking for?</div><hr><p>Learn about Moodle&#x27;s products, like Moodle LMS or Moodle Worplace, or find a Moodle Certified Service Provider.<br><br><a href="https://moodle.com">Moodle.com<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p><hr><p>Our social network to share and curate open educational resources.<br><br><a href="https://moodle.net">MoodleNet<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p><hr><p>Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.<br><br><a href="https://moodle.academy">Moodle Academy<!-- --> <i class="fa fa-long-arrow-right icon"></i></a></p></div></div></ul><ul class="sites_nav_zUr9" id="sites-nav"><button class="nav_link_MbBP" type="button" aria-label="Close sites menu"><i class="fa_arrow_left_jgS9" style="margin-left:-0.6rem"></i></button><div class="pt-2 pathways"><p><a href="https://moodle.com">Moodle.com</a><br>Learn about Moodle&#x27;s products, like Moodle LMS or Moodle Worplace, or find a Moodle Certified Service Provider.<br></p><hr><p><a href="https://moodle.net">MoodleNet</a><br>Our social network to share and curate open educational resources.<br></p><hr><p><a href="https://moodle.academy">Moodle Academy</a><br>Courses and programs to develop your skills as a Moodle educator, administrator, designer or developer.<br></p></div></ul></div></nav><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__item navbar__link" href="/moodledevdocs/docs/4.4">Guides</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/community/contribute">Community</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/development/gettingstarted">Coding</a><a class="navbar__item navbar__link" href="/moodledevdocs/general/development/process">Process</a></div><div class="navbar__items navbar__items--right"><div class="wrapper_Jz6K"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/moodledevdocs/general/development/gettingstarted">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/moodledevdocs/general/development/policies">Policies</a><button aria-label="Expand sidebar category &#x27;Policies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/moodledevdocs/general/development/tools">Tools</a><button aria-label="Collapse sidebar category &#x27;Tools&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/moodledevdocs/general/development/tools/behat">Behat</a><button aria-label="Collapse sidebar category &#x27;Behat&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/behat/running">Running acceptance tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/moodledevdocs/general/development/tools/behat/writing">Writing acceptance tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/moodledevdocs/general/development/tools/behat/browsers">Browsers</a><button aria-label="Expand sidebar category &#x27;Browsers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/cibot">Automated code review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/component-library">Component library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/composer">Composer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/exceptiontracing">Exception Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/generator">Generator tool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/gha">GitHub Actions integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/gitpod">Gitpod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/mdk">Moodle Development Kit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/metadata">Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/nodejs">NodeJS and Grunt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/phpcs">PHP CodeSniffer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/phpunit">PHPUnit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/moodledevdocs/general/development/tools/xmldb">XMLDB editor</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/moodledevdocs/general/development/abc">Advice</a><button aria-label="Expand sidebar category &#x27;Advice&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/moodledevdocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/moodledevdocs/general/development/tools"><span itemprop="name">Tools</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/moodledevdocs/general/development/tools/behat"><span itemprop="name">Behat</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Writing acceptance tests</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Writing acceptance tests</h1></header>
<p>This documentation gives some hints on writing behat tests for Moodle core, and for plugins. The focus of the documentation is on behat tests for plugins. Behat Features and Scenarios are written in a natural language, and should
describe how a user would interact with Moodle.</p>
<p>Each test consists of several stages which are categorised by the terms <strong>Given</strong>, <strong>When</strong>, and <strong>Then</strong>:</p>
<ul>
<li><strong>Given</strong>: These steps allow you to perform a test set-up. Typically Given steps are used to set configuration, create users, courses and plugin instances, and generally prepare the site for testing</li>
<li><strong>When</strong>: When steps are used to get the test environment to the point at which you wish to test the conditions. This may include logging in, and then performing a range of actions like submitting an assignment and grading it for example</li>
<li><strong>Then</strong>: Then steps are used to check that your plugin behaved as expected. They typically check very simple things like if certain elements or text are visible or not. For example after submitting an assignment in the When stage, you may have a step which checks that a notice was shown to state that the submission was successful.
These three stages match the standard <a href="http://xunitpatterns.com/Four%20Phase%20Test.html" target="_blank" rel="noopener noreferrer">Four-phase test pattern</a>. The fourth phase is &#x27;tear-down&#x27; which is performed by Moodle between each test and does not need to be explicitly defined in your test.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Each test should have only one use of <strong>Given</strong>, <strong>When</strong>, and <strong>Then</strong>.
See <a href="https://tracker.moodle.org/browse/MDLSITE-3778" target="_blank" rel="noopener noreferrer">MDLSITE-3778</a> for information and the policy decision on why you should not have multiple Given, When, and Then steps.</p></div></div>
<p>Where you have several Given, When, and Then steps you should use the words <strong>And</strong>, and <strong>But</strong>, for example:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Given the following user exists:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">  </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> username   </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> ccolon             </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> First name </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Colin              </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Last name  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Colon              </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> email      </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> ccolon@example.com </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">And the following course exists:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">  </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> Name      </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> Jump Judging (Level 1) </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Shortname </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> sjea1                  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I log in as </span><span class="token string" style="color:#e3116c">&quot;ccolon&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">And I navigate to </span><span class="token string" style="color:#e3116c">&quot;Site home &gt; Jump Judging (Level 1)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then I should see </span><span class="token string" style="color:#e3116c">&quot;You are not enrolled in this course&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">But I should see </span><span class="token string" style="color:#e3116c">&quot;Enrol now&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>To initialize and run your tests, please follow the instructions of <a href="/moodledevdocs/general/development/tools/behat/running">Running acceptance test</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-own-tests">Create your own tests<a href="#create-your-own-tests" class="hash-link" aria-label="Direct link to Create your own tests" title="Direct link to Create your own tests">​</a></h2>
<p>Behat tests are located within the directory tests/behat of your plugin.
The different tests are defined in files with the ending <code>*.feature</code>.
First, you have to define the header of your test:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">@mod</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@mod_yourplugin</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@javascript</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token feature keyword" style="color:#00009f">Feature:</span><span class="token feature important"> Here comes a description of your user story.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The tags on top of the feature description can be used to select specific test cases when running the tests.
The <code>@javascript</code> tag should only be used, if JavaScript is needed to execute your test. This is dependent on the step you will use in your definition.
JavaScript tests are usually much slower than tests executed without JavaScript.</p>
<p>Afterwards you can specify a scenario:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token scenario keyword" style="color:#00009f">Scenario:</span><span class="token scenario important"> Description of your scenario, which you want to test.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">When</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> log in as </span><span class="token string" style="color:#e3116c">&quot;student1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> am on </span><span class="token string" style="color:#e3116c">&quot;Course 1&quot;</span><span class="token plain"> course homepage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Again you can define specific tags. Afterwards you write the steps, which should be executed during your test.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Tags that are specified in your feature&#x27;s header automatically apply to all scenarios defined in that feature, so it is not necessary to repeat them. In the above example, the scenario will use JavaScript, although it does not have the <code>@javascript</code> tag.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-scenarios">Multiple Scenarios<a href="#multiple-scenarios" class="hash-link" aria-label="Direct link to Multiple Scenarios" title="Direct link to Multiple Scenarios">​</a></h3>
<p>You can have an arbitrary amount of scenarios within a test. Please make sure they all belong to the same feature.
If you have certain steps, which should be executed for every scenario of a feature, you can define them using a background:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token scenario keyword" style="color:#00009f">Background:</span><span class="token scenario important"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">Given</span><span class="token plain"> the following </span><span class="token string" style="color:#e3116c">&quot;courses&quot;</span><span class="token plain"> exist:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">      </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> fullname </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> shortname </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> category </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> groupmode </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">      </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Course 1 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> C1        </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> 0        </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> 1         </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> the following </span><span class="token string" style="color:#e3116c">&quot;users&quot;</span><span class="token plain"> exist:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">      </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> username </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> firstname </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> lastname </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> email </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">      </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> teacher1 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Theo </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> Teacher </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> teacher1@example.com </span><span class="token table-body punctuation" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is usually used, to define the different <code>Given</code> steps.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-existing-steps">Use existing steps<a href="#use-existing-steps" class="hash-link" aria-label="Direct link to Use existing steps" title="Direct link to Use existing steps">​</a></h3>
<p>There are different ways how to effectively browse the available existing steps:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="moodle-administration">Moodle Administration<a href="#moodle-administration" class="hash-link" aria-label="Direct link to Moodle Administration" title="Direct link to Moodle Administration">​</a></h4>
<p>Moodle offers within its administration menu under Site Administration &gt; Development &gt; Acceptance Testing a complete and searchable list of all available step definitions.
However, make sure you installed the behat test site first!</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-integration">IDE integration<a href="#ide-integration" class="hash-link" aria-label="Direct link to IDE integration" title="Direct link to IDE integration">​</a></h4>
<p>In PhpStorm or IntelliJ you can install the behat extension. Then you get auto completions within feature files, which helps a lot during behat test development.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="providing-values-to-steps">Providing values to steps<a href="#providing-values-to-steps" class="hash-link" aria-label="Direct link to Providing values to steps" title="Direct link to Providing values to steps">​</a></h3>
<p>Most of the steps requires values, there are methods to provide values to steps, the method depends on the step specification.</p>
<ul>
<li><strong>A string/text</strong> is the most common case, the texts are wrapped between double quotes (<code>&quot;</code> character) you have to replace the info about the expected value for your value; for example something like <strong>I press &quot;BUTTON_STRING&quot;</strong> should become <strong>I press &quot;Save and return to course&quot;</strong>. If you want to add a string which contains a &quot; character, you can escape it with &quot;, for example <strong>I fill the &quot;Name&quot; field with &quot;Alan alias &quot;the legend&quot;&quot;</strong>. You can identify this steps because they ends with <strong>_STRING</strong></li>
<li><strong>A number</strong> some steps requires numbers as values, to be more specific an undetermined number of digits from 0 to 9 (Natural numbers + 0) you can identify them because the expected value info string ends with <strong>_NUMBER</strong></li>
<li><strong>A table</strong>; is a relation between values, the most common use of it is to fill forms. The steps which requires tables are easily identifiable because they finish with <strong>:</strong> The steps description gives info about what the table columns must contain, for example <strong>Fills a moodle form with field/value data</strong>. Here you don&#x27;t need to escape the double quotes if you want to include them as part of the value.</li>
<li><strong>A PyString</strong> is a multiline string, most commonly used to fill out forms when a newline is required. Like steps with tables, steps which require PyStrings will end with &quot;:&quot;</li>
<li><strong>A field value</strong> There are many different field types, if an argument requires a field value the expected value will depend on the field type:<!-- -->
<ul>
<li>Text-based fields: It expects the text. This includes textareas, input type text, input type password...</li>
<li>Checkbox: It expects 1 to check and for checked and &quot;&quot; to uncheck or for unchecked</li>
<li>Select: It expects the option text or the option value. In case you interact with a multi-select you should specify the options separating them with commas. For example: <strong>option1, option2, option3</strong></li>
<li>Radio: The text of the radio option</li>
</ul>
</li>
<li><strong>A selector</strong> there are steps that can be used with different kinds of elements, for example <strong>I click on &quot;User Name&quot; &quot;link&quot;</strong> or <strong>I click on &quot;User Name&quot; &quot;button&quot;</strong> this is a closed list of elements, they always works together with another argument, where you specify the locator (eg. the link text in a link) In the &#x27;Acceptance testing&#x27; interface you can see a drop-down menu to select one of these options:<!-- -->
<ul>
<li>field - for searching a field by its id, name, value or label</li>
<li>link - for searching a link by its href, id, title, img alt or value</li>
<li>button - for searching a button by its name, id, value, img alt or title</li>
<li>link_or_button - for searching for both, links and buttons</li>
<li>select - for searching a select field by its id, name or label</li>
<li>checkbox - for searching a checkbox by its id, name, or label</li>
<li>radio - for searching a radio button by its id, name, or label</li>
<li>file - for searching a file input by its id, name, or label</li>
<li>optgroup - for searching optgroup by its label</li>
<li>option - for searching an option by its content</li>
<li>dialogue - for searching a dialogue with the specified header text</li>
<li>filemanager - for searching a filemanager by it&#x27;s id or label</li>
<li>block - for searching a Moodle block by it&#x27;s English name or it&#x27;s frankenstyle name</li>
<li>section - for searching for a section on a course page by it&#x27;s title or its written out date (e.g. &quot;1 January - 7 January&quot;). Use &quot;frontpage&quot; &quot;section&quot; for the frontpage section if it has no title (default)</li>
<li>activity - for searching for an activity module in a course list by it&#x27;s title</li>
<li>region - for searching a Moodle page region with that id, in fact it works with all ids for <tt>div</tt>, <tt>section</tt>, <tt>aside</tt>, <tt>header</tt> or <tt>footer</tt> elements.</li>
<li>table_row - for searching a table row which contains the specified text</li>
<li>table - for searching a table by its id or caption</li>
<li>icon - for searching an icon by its title</li>
<li>fieldset - for searching a fieldset by it&#x27;s id or legend</li>
<li>css_element - for searching an element by its CSS selector</li>
<li>xpath_element - for searching an element by its XPath</li>
</ul>
</li>
<li><strong>A text selector</strong> similar to a selector but those are the elements that returns an area of the DOM, they are useful in steps following the format <strong>... in the &quot;Community finder&quot; &quot;block&quot;</strong> where you are clicking or looking for some text inside a specific area. In the &#x27;Acceptance testing&#x27; interface you can see a drop-down menu to select one of these options:<!-- -->
<ul>
<li>dialogue - for searching a dialogue with the specified header text</li>
<li>block - for searching a Moodle block by it&#x27;s English name or it&#x27;s frankenstyle name</li>
<li>section - for searching for a section on a course page by it&#x27;s title or its written out date (e.g. &quot;1 January - 7 January&quot;). Use &quot;frontpage&quot; &quot;section&quot; for the frontpage section if it has no title (default)</li>
<li>activity - for searching for an activity module in a course list by it&#x27;s title</li>
<li>region - for searching a Moodle page region with that id, in fact it works with all ids for <tt>div</tt>, <tt>section</tt>, <tt>aside</tt>, <tt>header</tt> or <tt>footer</tt> elements.</li>
<li>table_row - for searching a table row which contains the specified text</li>
<li>table - for searching a table by its id or caption</li>
<li>fieldset - for searching a fieldset by it&#x27;s id or legend</li>
<li>list_item - for searching a list item which contains the specified text</li>
<li>css_element - for searching an element by its CSS selector</li>
<li>xpath_element - for searching an element by its XPath</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="checking-table-values">Checking table values<a href="#checking-table-values" class="hash-link" aria-label="Direct link to Checking table values" title="Direct link to Checking table values">​</a></h4>
<p>You can check if specific value exists or not in a table row/column by using:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Then </span><span class="token string" style="color:#e3116c">&quot;STRING_IN_ROW&quot;</span><span class="token plain"> row </span><span class="token string" style="color:#e3116c">&quot;COLUMN_HEADER&quot;</span><span class="token plain"> column of </span><span class="token string" style="color:#e3116c">&quot;TABLE_ID&quot;</span><span class="token plain"> table should contain </span><span class="token string" style="color:#e3116c">&quot;VALUE_TO_CHECK&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Then the following should exist in the </span><span class="token string" style="color:#e3116c">&quot;TABLE_ID&quot;</span><span class="token plain"> table:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">    </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> COLUMN_HEADER1 </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> COLUMN_HEADER2 </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">    </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> VALUE_IN_ROW_1 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> VALUE_IN_ROW_1 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">    </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> VALUE_IN_ROW_2 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> VALUE_IN_ROW_2 </span><span class="token table-body punctuation" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-use-cases">Advanced use cases<a href="#advanced-use-cases" class="hash-link" aria-label="Direct link to Advanced use cases" title="Direct link to Advanced use cases">​</a></h3>
<p>Most of the time the usage of existing step definitions is straight forward. However, there are some exceptions were it might get complicated. Some of them are listed here:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uploading-files">Uploading files<a href="#uploading-files" class="hash-link" aria-label="Direct link to Uploading files" title="Direct link to Uploading files">​</a></h4>
<p>Note than some tests requires files to be uploaded, in this case</p>
<ul>
<li>The <strong>I upload &quot;FILEPATH_STRING&quot; file to &quot;FILEPICKER_FIELD_STRING&quot; filepicker</strong> step can be used when located in the form page</li>
<li>The file to upload should be included along with the Moodle codebase in <code>COMPONENTNAME/tests/fixtures/*</code></li>
<li>The file to upload is specified by it&#x27;s path, which should be relative to the codebase root (<code>lib/tests/fixtures/users.csv</code> for example)</li>
<li><strong>/</strong> should be used as directory separator and the file names can not include this <strong>/</strong> character as all of them would be converted to the OS-dependant directory separator to maintain the compatibility with Windows systems.</li>
<li>The scenarios that includes files uploading should be tagged using the <strong>@_file_upload</strong> tag</li>
</ul>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">@editor</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@editor_atto</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@atto</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@atto_media</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">@_file_upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token feature keyword" style="color:#00009f">Feature:</span><span class="token feature important"> Add media to Atto</span><span class="token feature"></span><br></span><span class="token-line" style="color:#393A34"><span class="token feature">  To write rich text - I need to add media.</span><br></span><span class="token-line" style="color:#393A34"><span class="token feature"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token scenario keyword" style="color:#00009f">Background:</span><span class="token scenario important"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">Given</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> log in as </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> follow </span><span class="token string" style="color:#e3116c">&quot;Manage private files...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> upload </span><span class="token string" style="color:#e3116c">&quot;lib/editor/atto/tests/fixtures/moodle-logo.webm&quot;</span><span class="token plain"> file to </span><span class="token string" style="color:#e3116c">&quot;Files&quot;</span><span class="token plain"> filemanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> upload </span><span class="token string" style="color:#e3116c">&quot;lib/editor/atto/tests/fixtures/moodle-logo.mp4&quot;</span><span class="token plain"> file to </span><span class="token string" style="color:#e3116c">&quot;Files&quot;</span><span class="token plain"> filemanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> upload </span><span class="token string" style="color:#e3116c">&quot;lib/editor/atto/tests/fixtures/moodle-logo.png&quot;</span><span class="token plain"> file to </span><span class="token string" style="color:#e3116c">&quot;Files&quot;</span><span class="token plain"> filemanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> upload </span><span class="token string" style="color:#e3116c">&quot;lib/editor/atto/tests/fixtures/pretty-good-en.vtt&quot;</span><span class="token plain"> file to </span><span class="token string" style="color:#e3116c">&quot;Files&quot;</span><span class="token plain"> filemanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> upload </span><span class="token string" style="color:#e3116c">&quot;lib/editor/atto/tests/fixtures/pretty-good-sv.vtt&quot;</span><span class="token plain"> file to </span><span class="token string" style="color:#e3116c">&quot;Files&quot;</span><span class="token plain"> filemanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atrule" style="color:#00a4db">And</span><span class="token plain"> </span><span class="token atrule" style="color:#00a4db">I</span><span class="token plain"> click on </span><span class="token string" style="color:#e3116c">&quot;Save changes&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;button&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="field-groups">Field groups<a href="#field-groups" class="hash-link" aria-label="Direct link to Field groups" title="Direct link to Field groups">​</a></h4>
<p>This section describes how you can use the step definitions</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I set the following fields to these values:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I set the field </span><span class="token string" style="color:#e3116c">&quot;([^&quot;</span><span class="token plain">]|\</span><span class="token string" style="color:#e3116c">&quot;*)&quot;</span><span class="token plain"> to </span><span class="token string" style="color:#e3116c">&quot;([^&quot;</span><span class="token plain">]|\</span><span class="token string" style="color:#e3116c">&quot;*)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>for field groups. Examples for such field groups are the duration field or the date_time_selector. These are not displayed as one single input field within the front-end but consist of multiple input fields within one row.
You can access each single input field of a group using</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">identifierOfYourField[keyOfTheSpecificInput]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Examples would be:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I set the following fields to these values:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">  </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> myDate[day]             </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa">   21   </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDate[month]           </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c">   12   </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDate[hour]            </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c">   14   </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDuration[number]      </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c">   10   </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDuration[unit]        </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> days   </span><span class="token table-body punctuation" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="human-readable-and-relative-dates">Human-readable and relative dates<a href="#human-readable-and-relative-dates" class="hash-link" aria-label="Direct link to Human-readable and relative dates" title="Direct link to Human-readable and relative dates">​</a></h4>
<p>When testing plugins with deadlines, for instance for submissions, it is often necessary to set certain time values to dates relative to today.
You can specify a relative time enclosed within two ## blocks. For example:</p>
<ul>
<li><code>## yesterday ##</code></li>
<li><code>## 2 days ago ##</code>
You can use everything according to <a href="http://php.net/manual/en/datetime.formats.php" target="_blank" rel="noopener noreferrer">http://php.net/manual/en/datetime.formats.php</a>.</li>
</ul>
<p>Especially useful are the relative formats from: <a href="http://php.net/manual/en/datetime.formats.relative.php" target="_blank" rel="noopener noreferrer">http://php.net/manual/en/datetime.formats.relative.php</a></p>
<p>Additionally, you can specify a format you want the date to be returned into:</p>
<ul>
<li><code>## yesterday ## myformat ##</code>
These formats can be used as outlined in <a href="http://php.net/manual/en/function.date.php" target="_blank" rel="noopener noreferrer">http://php.net/manual/en/function.date.php</a>.
This can be combined with the field groups:</li>
</ul>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I set the following fields to these values:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">  </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> myDate[day]   </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> ##yesterday##d## </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDate[month] </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> ##yesterday##F## </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> myDate[year]  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> ##yesterday##Y## </span><span class="token table-body punctuation" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-your-own-steps">Writing your own steps<a href="#writing-your-own-steps" class="hash-link" aria-label="Direct link to Writing your own steps" title="Direct link to Writing your own steps">​</a></h3>
<p>Sometimes, you will need to set up data that is specific to your plugin, or perform steps that are specific to your plugin&#x27;s UI. In this case it may be necessary to <a href="/moodledevdocs/general/development/tools/behat/writing#writing-new-acceptance-test-step-definitions">write new step definitions</a>, but the short version is that you define new steps as PHP methods with a special annotation inside a class called <code>behat_plugintype_plugingname</code> inside <code>tests/behat/behat_plugintype_plugingname.php</code> in your plugin.</p>
<p>As well as creating completely new steps, you can also extend some of the standard steps:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-selectors--in-the--">Custom selectors (<tt>... in the &quot;...&quot; &quot;...&quot;</tt>)<a href="#custom-selectors--in-the--" class="hash-link" aria-label="Direct link to custom-selectors--in-the--" title="Direct link to custom-selectors--in-the--">​</a></h4>
<p>There are a load of different steps which can refer to specific items on-screen, for example</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">And I click on </span><span class="token string" style="color:#e3116c">&quot;Submit all and finish&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;button&quot;</span><span class="token plain"> in the </span><span class="token string" style="color:#e3116c">&quot;Confirmation&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dialogue&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, &#x27;button&#x27; and &#x27;dialogue&#x27; are examples of selectors, and &#x27;Submit all and finish&#x27; and &#x27;Confirmation&#x27; are the locators which say which button or dialogue it is. When the test runs, this gets converted to an XPath expression, which is what the Behat system actually uses to locate the right element on the page.</p>
<p>You can define new types of selector (for example <code>core_message &gt; Message</code>) by implementing functions like <code>behat_component_named_selector</code> in your plugin&#x27;s <code>behat_plugintype_plugingname</code> class. The detailed instructions for how to do this are in <a href="https://github.com/moodle/moodle/blob/33da028c27607354981cd8e62ecabb7b973c6637/lib/behat/behat_base.php#L1111" target="_blank" rel="noopener noreferrer">the PHPdoc comments on the base class</a>.</p>
<p>The reasons you might want to do this are:</p>
<ul>
<li>It makes your tests easier to read, which makes it easier to be sure that the test is testing the right thing, and being able to read the tests helps people understand your features.</li>
<li>If the HTML structure you output changes, then you only need to update the selector definition in one place.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-navigation-targets-and-i-am-on-the---page">Custom navigation targets (<tt>And I am on the &quot;...&quot; &quot;...&quot; page</tt>)<a href="#custom-navigation-targets-and-i-am-on-the---page" class="hash-link" aria-label="Direct link to custom-navigation-targets-and-i-am-on-the---page" title="Direct link to custom-navigation-targets-and-i-am-on-the---page">​</a></h4>
<p>There are two related steps:</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Given I am on the </span><span class="token string" style="color:#e3116c">&quot;Quiz 1&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mod_quiz &gt; View&quot;</span><span class="token plain"> page logged in as </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Given I am on the </span><span class="token string" style="color:#e3116c">&quot;C1&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Course&quot;</span><span class="token plain"> page</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To make this work, in your plugin&#x27;s <code>behat_plugintype_plugingname</code> class, you need to implement the functions <code>resolve_page_url</code> and <code>resolve_page_instance_url</code> methods. Once again, the detailed instructions about how this works are given in <a href="https://github.com/moodle/moodle/blob/a0fc902eb184cd4097c8ab453ddc57964cd2dbd4/lib/behat/behat_base.php#L1093" target="_blank" rel="noopener noreferrer">the PHPdoc comments on the base class</a>.</p>
<p>There are two reasons why it is good to use these steps:</p>
<ul>
<li>You are trying to test that your feature works, not Moodle navigation. In the pase we have had many occasions when Moodle navigation changed, and lots of tests failed and had to be fixed. It is better for your tests to start on your feature. (Except, perhaps, it might be appropriate to have one test for the expected method for users to navigate to your feature.)</li>
<li>It is much faster because you load fewer irrelevant pages, and in particular the normal log in step leaves you on the Dashboard page, which is <strong>very</strong> slow to load.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-entity-generators-and-the-following--exist">Custom entity generators (<tt>And the following &quot;...&quot; exist:</tt>)<a href="#custom-entity-generators-and-the-following--exist" class="hash-link" aria-label="Direct link to custom-entity-generators-and-the-following--exist" title="Direct link to custom-entity-generators-and-the-following--exist">​</a></h4>
<p>It is possible to extend the <code>Given the following &quot;entities&quot; exist</code> step to support your plugin&#x27;s data generators. This avoids having to write new whole
new behat step definitions for your plugin, and allows you to re-use data generators between PHPUnit and Behat tests.</p>
<p>Full documentation of this process and all available options can be found in the <a href="https://github.com/moodle/moodle/blob/1d4fdb0d1c60448104bc9eac79b5123863c67cbd/lib/behat/classes/behat_generator_base.php#L33" target="_blank" rel="noopener noreferrer">PHPDoc for behat_generator_base</a>. A core example of this can be found in <a href="https://github.com/moodle/moodle/tree/master/mod/quiz/tests/generator" target="_blank" rel="noopener noreferrer">/mod/quiz/tests/generator</a> and <a href="https://github.com/moodle/moodle/blob/1d4fdb0d1c60448104bc9eac79b5123863c67cbd/mod/quiz/tests/behat/quiz_reset.feature#L51" target="_blank" rel="noopener noreferrer">quiz_reset.feature</a>. What follows is a simple example.</p>
<p>To begin, you need a <a href="https://docs.moodle.org/dev/Writing_PHPUnit_tests#Generators" target="_blank" rel="noopener noreferrer">generator</a> in <code>/*your*/*plugin*/tests/generator/lib.php</code>. If you are generating a type of entity called &quot;thing&quot;, your generator will need a method called create_thing, which accepts an object:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name-definition class-name">local_myplugin_generator</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">component_generator_base</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">create_thing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$DB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$DB</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">insert_record</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;local_myplugin_things&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$thing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, you will need to define your behat generator in <code>/*your*/*plugin*/tests/generator/behat_*your_plugin*_generator.php</code>, with the <code>method get_createable_entitites()</code> method:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name-definition class-name">behat_local_myplugin_generator</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">behat_generator_base</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">get_creatable_entities</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#00009f">array</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;things&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;datagenerator&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;thing&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;required&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>datagenerator</code> value refers to the method in the generator class that we are calling, in this case <code>create_thing()</code>. The outer array key is the entity name we will use in the behat step, in this case <code>Given the following &quot;local_myplugin &gt; things&quot; exist</code>.</p>
<p>Now, in your behat test, you can have a step like this, which will generate <strong>2 things</strong>, the first with the name &quot;thing1&quot; and the second with the name &quot;thing2&quot;.</p>
<div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Given the following </span><span class="token string" style="color:#e3116c">&quot;local_myplugin &gt; things&quot;</span><span class="token plain"> exist:</span><span class="token table-head"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-head">  </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-head th variable" style="color:#36acaa"> name   </span><span class="token table-head punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> thing1 </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body"></span><br></span><span class="token-line" style="color:#393A34"><span class="token table-body">  </span><span class="token table-body punctuation" style="color:#393A34">|</span><span class="token table-body td string" style="color:#e3116c"> thing2 </span><span class="token table-body punctuation" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-new-acceptance-test-step-definitions">Writing new acceptance test step definitions<a href="#writing-new-acceptance-test-step-definitions" class="hash-link" aria-label="Direct link to Writing new acceptance test step definitions" title="Direct link to Writing new acceptance test step definitions">​</a></h3>
<p>As well as using the already existing steps , you can also define new steps.</p>
<p>This is most easily learned by looking at the examples that are already in the code. In any plugin, for example <code>qtype_ddwtos</code>, look at the file <code>tests/behat/behat_qtype_ddwtos.php</code> inside that plugin. Steps are defined by a function that has a special <code>@Given</code>, <code>@When</code> or <code>@Then</code> annotation in the PHPdoc comment. This gives a regular expression. Any step in a <code>*.feature</code> file which matches that regular expression will be translated into a call to that function.</p>
<p>In terms of making the Behat test work, it does not matter whether you use <code>@Given</code>, <code>@When</code> or <code>@Then</code>. However, to make your step understandable to people using your step, it is important to use the right word. Use <code>@Given</code> for steps that set things up, <code>@When</code> for steps that perform actions, and <code>@Then</code> for steps that verify what happened.</p>
<p>When defining new Step definitions in your plugin, try to make sure the step name identifies it as belonging to your plugin. So, don&#x27;t make a step called <code>I disable UI plugins</code>. Call it something like <code>I disable UI plugins in the CodeRunner question type</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="override-behat-core-context-for-theme-suite">Override behat core context for theme suite<a href="#override-behat-core-context-for-theme-suite" class="hash-link" aria-label="Direct link to Override behat core context for theme suite" title="Direct link to Override behat core context for theme suite">​</a></h3>
<p>To override behat step definitions so as to run behat with specified theme, you should create a contexts within <code>/theme/{MYTHEME}/tests/behat/</code> with prefix <code>behat_theme_{MYTHEME}_</code> and suffixed with the context being overridden. For example, if you want to override <code>behat_mod_forum</code> context, then you should create a class <code>/theme/{MYTHEME}/tests/behat/mod_forum/behat_theme_{MYTHEME}_behat_mod_forum.php</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-behat-context-or-features-to-run-in-theme-suite">Disable behat context or features to run in theme suite<a href="#disable-behat-context-or-features-to-run-in-theme-suite" class="hash-link" aria-label="Direct link to Disable behat context or features to run in theme suite" title="Direct link to Disable behat context or features to run in theme suite">​</a></h3>
<p>To disable specific contexts and features from being executed by a specific theme/suite you can create a <code>/theme/{MYTHEME}/tests/behat/blacklist.json</code> file with following format.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;contexts&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;behat_grade&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;behat_navigation&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;features&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;auth/tests/behat/login.feature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string double-quoted-string" style="color:#e3116c">&quot;grade/tests/behat/grade_hidden_items.feature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above will:</p>
<ol>
<li>disable the use of step_definitions from <code>behat_grade</code> and <code>behat_navigation</code> while running theme suite</li>
<li>disable running of scenarios in <code>auth/tests/behat/login.feature</code> and <code>grade/tests/behat/grade_hidden_items.feature</code>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="override-core-behat-selectors">Override core behat selectors<a href="#override-core-behat-selectors" class="hash-link" aria-label="Direct link to Override core behat selectors" title="Direct link to Override core behat selectors">​</a></h3>
<p>To override behat selectors in specific theme, you should create a class <code>behat_theme_{MYTHEME}_behat_selectors</code> in <code>/theme/{MYTHEME}/tests/behat/behat_theme_{MYTHEME}_behat_selectors.php</code> extending behat_selectors.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="good-practice">Good practice<a href="#good-practice" class="hash-link" aria-label="Direct link to Good practice" title="Direct link to Good practice">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-one-thing-per-scenario">Test one thing per scenario<a href="#test-one-thing-per-scenario" class="hash-link" aria-label="Direct link to Test one thing per scenario" title="Direct link to Test one thing per scenario">​</a></h3>
<p>The ideal that you should strive for, is that each scenario tests just one specific bit of functionality. Therefore, if one test fails, the scenario name should tell you exactly what the bug is. Also, any bug should cause just one scenario to fail, not lots of unrelated ones. If you can achieve this, then the idea is that it minimises the time from seeing a test fail to having fixed the bug that was detected. Of course, this ideal is not always achievable, but in my experience it is worth striving for.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Note that this also implies that the Given, When and Then keywords should be used only once per scenario.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-given-should-not-use-the-ui">Set-up (Given) should not use the UI<a href="#set-up-given-should-not-use-the-ui" class="hash-link" aria-label="Direct link to Set-up (Given) should not use the UI" title="Direct link to Set-up (Given) should not use the UI">​</a></h3>
<p>The setup is not what you are really testing here. Therefore, it should be as quick and reliable as possible. The way to achieve this is with steps like <code>And the following &quot;Thing&quot; exist:</code> which directly insert the data into the database. If necessary, write extra steps for your plugin to setup the things you need.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dont-use-xpath-or-css-selectors---fix-your-accessibility-bugs">Don&#x27;t use XPath or CSS selectors - fix your Accessibility bugs<a href="#dont-use-xpath-or-css-selectors---fix-your-accessibility-bugs" class="hash-link" aria-label="Direct link to Don&#x27;t use XPath or CSS selectors - fix your Accessibility bugs" title="Direct link to Don&#x27;t use XPath or CSS selectors - fix your Accessibility bugs">​</a></h3>
<p>If, the only way you can identify something in the page that you want to manipulate is with a step like <code>I set the field with xpath &quot;//textarea[&#x27;answer&#x27;)](contains(@name,)&quot; to &quot;frog&quot;</code>, then this is probably the sign that you have an Accessibility bug, because Behat accesses the page very like a screen-reader user would.</p>
<p>You should be able to refer to things with steps like <code>I set the field &quot;Answer&quot; to &quot;frog&quot;&#x27;</code> or <code>I click on &quot;True&quot; &quot;radio&quot; in the &quot;First question&quot; &quot;question&quot;</code>. If not, you should probably think about fixing the accessibility bug, rather than resorting to unreadable selectors in your Behat test.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-you-define-more-steps-in-your-plugin-make-it-clear-they-come-from-your-plugin">When you define more steps in your plugin, make it clear they come from your plugin<a href="#when-you-define-more-steps-in-your-plugin-make-it-clear-they-come-from-your-plugin" class="hash-link" aria-label="Direct link to When you define more steps in your plugin, make it clear they come from your plugin" title="Direct link to When you define more steps in your plugin, make it clear they come from your plugin">​</a></h3>
<p>When defining new Step definitions in your plugin, try to make sure the step name identifies it as belonging to your plugin. So, don&#x27;t make a step called <code>I disable UI plugins</code>. Call it something like <code>I disable UI plugins in the CodeRunner question type</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phpdoc-comments-to-map-scenario-steps">PHPDoc comments to map scenario steps<a href="#phpdoc-comments-to-map-scenario-steps" class="hash-link" aria-label="Direct link to PHPDoc comments to map scenario steps" title="Direct link to PHPDoc comments to map scenario steps">​</a></h3>
<p>PHPDoc style comments before functions can be used to map to your .scenario files. Read more about this here <a href="https://behat.org/en/latest/user_guide/context/definitions.html" target="_blank" rel="noopener noreferrer">https://behat.org/en/latest/user_guide/context/definitions.html</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/quality-assurance">Quality Assurance</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/testing">Testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/behaviour-testing">Behaviour testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/moodledevdocs/general/tags/behat">Behat</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/moodle/devdocs/edit/main/general/development/tools/behat/writing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-11T15:48:29.000Z" itemprop="dateModified">11 Oct 2023</time></b> by <b>Philipp Imhof</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/moodledevdocs/general/development/tools/behat/running"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Running acceptance tests</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/moodledevdocs/general/development/tools/behat/browsers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Browsers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-your-own-tests" class="table-of-contents__link toc-highlight">Create your own tests</a><ul><li><a href="#multiple-scenarios" class="table-of-contents__link toc-highlight">Multiple Scenarios</a></li><li><a href="#use-existing-steps" class="table-of-contents__link toc-highlight">Use existing steps</a></li><li><a href="#providing-values-to-steps" class="table-of-contents__link toc-highlight">Providing values to steps</a></li><li><a href="#advanced-use-cases" class="table-of-contents__link toc-highlight">Advanced use cases</a></li><li><a href="#writing-your-own-steps" class="table-of-contents__link toc-highlight">Writing your own steps</a></li><li><a href="#writing-new-acceptance-test-step-definitions" class="table-of-contents__link toc-highlight">Writing new acceptance test step definitions</a></li><li><a href="#override-behat-core-context-for-theme-suite" class="table-of-contents__link toc-highlight">Override behat core context for theme suite</a></li><li><a href="#disable-behat-context-or-features-to-run-in-theme-suite" class="table-of-contents__link toc-highlight">Disable behat context or features to run in theme suite</a></li><li><a href="#override-core-behat-selectors" class="table-of-contents__link toc-highlight">Override core behat selectors</a></li></ul></li><li><a href="#good-practice" class="table-of-contents__link toc-highlight">Good practice</a><ul><li><a href="#test-one-thing-per-scenario" class="table-of-contents__link toc-highlight">Test one thing per scenario</a></li><li><a href="#set-up-given-should-not-use-the-ui" class="table-of-contents__link toc-highlight">Set-up (Given) should not use the UI</a></li><li><a href="#dont-use-xpath-or-css-selectors---fix-your-accessibility-bugs" class="table-of-contents__link toc-highlight">Don&#39;t use XPath or CSS selectors - fix your Accessibility bugs</a></li><li><a href="#when-you-define-more-steps-in-your-plugin-make-it-clear-they-come-from-your-plugin" class="table-of-contents__link toc-highlight">When you define more steps in your plugin, make it clear they come from your plugin</a></li><li><a href="#phpdoc-comments-to-map-scenario-steps" class="table-of-contents__link toc-highlight">PHPDoc comments to map scenario steps</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Moodle</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/releases">Release notes</a></li><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/projects">Projects</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/documentation">Developer docs</a></li><li class="footer__item"><a href="https://docs.moodle.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legacy docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moodledevdocs/general/documentation/code-of-conduct">Code of conduct</a></li><li class="footer__item"><a href="https://moodle.org/mod/forum/view.php?id=55" target="_blank" rel="noopener noreferrer" class="footer__link-item">General Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                    <a href="https://www.netlify.com" target="_blank" rel="noreferrer noopener" aria-label="Deploys by Netlify">
                        <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51">
                    </a>
                    </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2024 Moodle Pty Ltd. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>