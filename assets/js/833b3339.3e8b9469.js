"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[13385],{99148:(e,s,d)=>{d.r(s),d.d(s,{assets:()=>h,contentTitle:()=>n,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>a});var r=d(74848),t=d(28453),l=d(78924);const o={title:"Moodle App Release Process",sidebar_label:"Release",sidebar_position:1,tags:["Moodle App","Release notes"]},n=void 0,i={id:"development/process-moodleapp/release",title:"Moodle App Release Process",description:"Six weeks before (Code freeze)",source:"@site/general/development/process-moodleapp/release.md",sourceDirName:"development/process-moodleapp",slug:"/development/process-moodleapp/release",permalink:"/moodledevdocs/general/development/process-moodleapp/release",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/general/development/process-moodleapp/release.md",tags:[{label:"Moodle App",permalink:"/moodledevdocs/general/tags/moodle-app"},{label:"Release notes",permalink:"/moodledevdocs/general/tags/release-notes"}],version:"current",lastUpdatedBy:"Noel De Martin",lastUpdatedAt:171938779e4,sidebarPosition:1,frontMatter:{title:"Moodle App Release Process",sidebar_label:"Release",sidebar_position:1,tags:["Moodle App","Release notes"]},sidebar:"process",previous:{title:"Moodle App Development process",permalink:"/moodledevdocs/general/development/process-moodleapp"},next:{title:"Tracker introduction",permalink:"/moodledevdocs/general/development/tracker"}},h={},a=[{value:"Six weeks before (Code freeze)",id:"six-weeks-before-code-freeze",level:2},{value:"The release day",id:"the-release-day",level:2},{value:"The following days",id:"the-following-days",level:2},{value:"See also",id:"see-also",level:2}];function c(e){const s={a:"a",code:"code",h2:"h2",li:"li",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{frontMatter:o,metadata:i}),"\n",(0,r.jsx)(s.h2,{id:"six-weeks-before-code-freeze",children:"Six weeks before (Code freeze)"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"#"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Task"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Responsible"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"1."}),(0,r.jsxs)(s.td,{children:["Force an update of the ",(0,r.jsx)(s.a,{href:"https://moodle.org/plugins/view.php?id=997",children:"local_moodlemobileapp"})," plugin (as release candidate) with new strings in ",(0,r.jsx)(s.a,{href:"https://moodle.org/plugins",children:"moodle.org/plugins"})," (only for Moodle version 3.5)."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"2."}),(0,r.jsx)(s.td,{children:"Ask someone from sites or community team to review the new English strings."}),(0,r.jsx)(s.td,{children:"Community or Sites team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"3."}),(0,r.jsxs)(s.td,{children:["Announce in the ",(0,r.jsx)(s.a,{href:"https://lang.moodle.org/mod/forum/view.php?id=5",children:"moodle translation forums"})," the new strings available. This will allow translators to add the new strings during the days prior to the release."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"4."}),(0,r.jsxs)(s.td,{children:["Add the release notes in the release issue created (search for the ",(0,r.jsx)(s.a,{href:"https://tracker.moodle.org/issues/?jql=project%20%3D%20MOBILE%20AND%20labels%20%3D%20release_notes",children:"release_notes tag"}),"). Ask someone from the documentation team to review the release notes."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"5."}),(0,r.jsx)(s.td,{children:"Contact the marketing team announcing the new release and highlights."}),(0,r.jsx)(s.td,{children:"Team Lead"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"6."}),(0,r.jsxs)(s.td,{children:["Add new QA tests to the ",(0,r.jsx)(s.code,{children:"apps_test"})," site. New QA tests should be labeled with ",(0,r.jsx)(s.a,{href:"https://tracker.moodle.org/issues/?jql=project%20%3D%20MOBILE%20AND%20resolution%20in%20(Unresolved%2C%20Fixed)%20AND%20labels%20%3D%20qa_test_required%20ORDER%20BY%20priority%20DESC%2C%20updated%20DESC",children:"qa_test_required"}),", remove that label once they are added to the site."]}),(0,r.jsx)(s.td,{children:"Tester"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"7."}),(0,r.jsxs)(s.td,{children:["Complete all TODOs related with the upcoming release, which are marked in code with a comment starting with ",(0,r.jsx)(s.code,{children:"@todo {version-number}"})," (for example, before releasing 4.1 we'd search for comments starting with ",(0,r.jsx)(s.code,{children:"@todo 4.1"}),")"]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"8."}),(0,r.jsxs)(s.td,{children:["Update npm dependencies in the ",(0,r.jsx)(s.code,{children:"main"})," branch, and run ",(0,r.jsx)(s.code,{children:"npm audit"})," to ensure all the dependencies are OK. Also check github vulnerabilities report."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"9."}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Start testing"})}),(0,r.jsx)(s.td,{children:"Tester"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"the-release-day",children:"The release day"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"#"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Task"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Responsible"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"1."}),(0,r.jsxs)(s.td,{children:["Set the right version number for the new Moodle LMS major release in the ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp/blob/main/src/core/classes/site.ts#L102",children:"site.ts"})," constant ",(0,r.jsx)(s.code,{children:"MOODLE_RELEASES"}),"."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"2."}),(0,r.jsx)(s.td,{children:"Launch the internal release github workflow."}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"3."}),(0,r.jsxs)(s.td,{children:["Do some testing with the production builds before sending the application to the stores (overall testing to see that nothing is broken): ",(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Correct definitive version name displayed (and commit)"}),(0,r.jsx)("li",{children:"AOT compiling worked"}),(0,r.jsxs)("li",{children:["Language strings synchronised from ",(0,r.jsx)(s.a,{href:"https://lang.moodle.net",children:"lang.moodle.net"})]}),(0,r.jsx)("li",{children:"New language packs added"})]})]}),(0,r.jsx)(s.td,{children:"All the team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"4."}),(0,r.jsx)(s.td,{children:"Send the applications to the stores for review."}),(0,r.jsx)(s.td,{children:"Team Lead"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"5."}),(0,r.jsxs)(s.td,{children:["Check TAG/Release have been created in github (",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp/releases",children:"moodlehq/moodleapp"}),") with the version number."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"6."}),(0,r.jsxs)(s.td,{children:["Update the ",(0,r.jsx)(s.code,{children:"ci"})," branch in the behat tests plugin (",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodle-local_moodleappbehat/",children:"moodlehq/moodle-local_moodleappbehat"}),") with the version number."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"7."}),(0,r.jsxs)(s.td,{children:["Update ",(0,r.jsx)(s.a,{href:"../../app/upgrading",children:"upgrade guides"}),"."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"8."}),(0,r.jsxs)(s.td,{children:["Open PR with release documentation updates (from ",(0,r.jsxs)(s.a,{href:"https://github.com/moodlemobile/devdocs/tree/app-docs",children:["moodlemobile/devdocs",":app-docs"]})," to ",(0,r.jsx)(s.a,{href:"https://github.com/moodle/devdocs",children:"moodle/devdocs"}),")."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"9."}),(0,r.jsxs)(s.td,{children:["Mark the issue and the ",(0,r.jsx)(s.a,{href:"https://tracker.moodle.org/projects/MOBILE?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page",children:"version"})," as released in the tracker."]}),(0,r.jsx)(s.td,{children:"Team Lead"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"10."}),(0,r.jsxs)(s.td,{children:["Update ",(0,r.jsx)(s.a,{href:"/moodledevdocs/general/app_releases",children:"release notes"}),"."]}),(0,r.jsx)(s.td,{children:"Team Lead"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"the-following-days",children:"The following days"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"#"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Task"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Responsible"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"1."}),(0,r.jsxs)(s.td,{children:["Create an issue in the tracker for the next release, like: ",(0,r.jsx)(s.a,{href:"https://tracker.moodle.org/browse/MOBILE-4270",children:"MOBILE-4270"})]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"2."}),(0,r.jsx)(s.td,{children:"Social media announcements (Forum and Twitter)."}),(0,r.jsx)(s.td,{children:"All the team & Marketing team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"3."}),(0,r.jsxs)(s.td,{children:["Post in ",(0,r.jsx)(s.a,{href:"https://moodle.org/news",children:"moodle.org/news"}),"."]}),(0,r.jsx)(s.td,{children:"Team Lead"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"4."}),(0,r.jsxs)(s.td,{children:["Review the users and developers documentation (check that everything is in order). Review the ",(0,r.jsx)(s.a,{href:"https://tracker.moodle.org/issues/?jql=project%20%3D%20MOBILE%20AND%20labels%20in%20%28docs_required%2C%20dev_docs_required%29",children:"docs_required and dev_docs_required_tags"}),". Review the ",(0,r.jsx)(s.a,{href:"https://docs.moodle.org/en/Moodle_Mobile_features",children:"Mobile features wiki documentation"}),"."]}),(0,r.jsx)(s.td,{children:"All the team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"5."}),(0,r.jsxs)(s.td,{children:["Update branches and tags in all repositories (",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp",children:"moodleapp"}),", ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodle-local_moodlemobileapp/",children:"local_moodlemobileapp"}),", ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodle-local_moodleappbehat",children:"local_moodleappbehat"}),", etc.)."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"6."}),(0,r.jsxs)(s.td,{children:["Prepare the repository for the next release: ",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["Bump version numbers in the following files: ",(0,r.jsx)(s.code,{children:"config.xml"}),", ",(0,r.jsx)(s.code,{children:"package.json"}),", ",(0,r.jsx)(s.code,{children:"package-lock.json"}),", and ",(0,r.jsx)(s.code,{children:"moodle.config.json"}),"."]})," ",(0,r.jsxs)("li",{children:["Update the ",(0,r.jsx)(s.code,{children:"DEFAULT_LASTVERSION"})," variable with the new major release on ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp/blob/main/scripts/lang_functions.sh",children:"scripts/lang_functions.sh"})]})," ",(0,r.jsxs)("li",{children:["Set the version number for the next Moodle LMS major release in the ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp/blob/main/src/core/classes/site.ts#L102",children:"site.ts"})," constant ",(0,r.jsx)(s.code,{children:"MOODLE_RELEASES"})]})," "]})," You can see an example of doing all of that in this PR: ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodleapp/pull/3707",children:"4.3.0 version update"})]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"7."}),(0,r.jsxs)(s.td,{children:["Check that the ",(0,r.jsx)(s.a,{href:"https://cloud.docker.com/u/moodlehq/repository/docker/moodlehq/moodleapp/",children:"Docker image"})," for the new version was successfully built."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"8."}),(0,r.jsxs)(s.td,{children:["Update of the ",(0,r.jsx)(s.a,{href:"https://moodle.org/plugins/view.php?id=997",children:(0,r.jsx)(s.code,{children:"local_moodlemobileapp"})})," plugin (as final release) in ",(0,r.jsx)(s.a,{href:"https://moodle.org/plugins",children:"moodle.org/plugins"}),"."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"9."}),(0,r.jsxs)(s.td,{children:["Update of the ",(0,r.jsx)(s.a,{href:"https://github.com/moodlehq/moodle-local_moodleappbehat/",children:(0,r.jsx)(s.code,{children:"local_moodleappbehat"})})," plugin (as final release) in ",(0,r.jsx)(s.a,{href:"https://moodle.org/plugins",children:"moodle.org/plugins"}),"."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"10."}),(0,r.jsx)(s.td,{children:"Check if the Android API level should be increased or not to use a recent one."}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"11."}),(0,r.jsx)(s.td,{children:"Review the new features/improvements specs/shaping documents to ensure that they clearly reflect the actual implementation of the feature."}),(0,r.jsx)(s.td,{children:"All the team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"12."}),(0,r.jsx)(s.td,{children:"Review that all the minor issues found during the QA testing have a related and triaged MOBILE issue in the tracker."}),(0,r.jsx)(s.td,{children:"All the team"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"13."}),(0,r.jsxs)(s.td,{children:["Make sure that tests are passing with all the supported versions in ",(0,r.jsx)(s.a,{href:"https://ci.moodle.org",children:"ci.moodle.org"}),"."]}),(0,r.jsx)(s.td,{children:"Developer"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"14."}),(0,r.jsxs)(s.td,{children:["Update APK in ",(0,r.jsx)(s.a,{href:"https://download.moodle.org/mobile",children:"download.moodle.org/mobile"}),"."]}),(0,r.jsx)(s.td,{children:"Team Lead"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"/moodledevdocs/general/app_releases",children:"Moodle App Release Notes"})}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);