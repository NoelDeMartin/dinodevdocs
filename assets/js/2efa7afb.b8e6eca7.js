"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[97183],{14149:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>c,frontMatter:()=>d,metadata:()=>r,toc:()=>l});var n=o(74848),s=o(28453),a=o(78924);const d={title:"No submit button",tags:["core_form","core","Forms API","Advanced"]},i=void 0,r={id:"apis/subsystems/form/advanced/no-submit-button",title:"No submit button",description:"The moodleform 'nosubmitbutton_pressed()' method allows you to detect if a button on your form has been pressed that is a submit button but that has been defined as a button that doesn't result in a processing of all the form data but will result in some form 'sub action' and then having the form redisplayed. This is useful for example to have an 'Add' button to add some option to a select box in the form etc. You define a button as a no submit button as in the example below (in definition()). This example adds a text box and a submit button in a group.",source:"@site/versioned_docs/version-4.3/apis/subsystems/form/advanced/no-submit-button.md",sourceDirName:"apis/subsystems/form/advanced",slug:"/apis/subsystems/form/advanced/no-submit-button",permalink:"/moodledevdocs/docs/4.3/apis/subsystems/form/advanced/no-submit-button",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/versioned_docs/version-4.3/apis/subsystems/form/advanced/no-submit-button.md",tags:[{label:"core_form",permalink:"/moodledevdocs/docs/4.3/tags/core-form"},{label:"core",permalink:"/moodledevdocs/docs/4.3/tags/core"},{label:"Forms API",permalink:"/moodledevdocs/docs/4.3/tags/forms-api"},{label:"Advanced",permalink:"/moodledevdocs/docs/4.3/tags/advanced"}],version:"4.3",lastUpdatedBy:"Sara Arjona",lastUpdatedAt:1697795601e3,frontMatter:{title:"No submit button",tags:["core_form","core","Forms API","Advanced"]},sidebar:"docs",previous:{title:"Checkbox controller",permalink:"/moodledevdocs/docs/4.3/apis/subsystems/form/advanced/checkbox-controller"},next:{title:"Repeat elements",permalink:"/moodledevdocs/docs/4.3/apis/subsystems/form/advanced/repeat-elements"}},m={},l=[{value:"Form definition",id:"form-definition",level:2},{value:"Form handling",id:"form-handling",level:2}];function u(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{frontMatter:d,metadata:r}),"\n",(0,n.jsxs)(t.p,{children:["The moodleform 'no_submit_button_pressed()' method allows you to detect if a button on your form has been pressed that is a submit button but that has been defined as a button that doesn't result in a processing of all the form data but will result in some form 'sub action' and then having the form redisplayed. This is useful for example to have an 'Add' button to add some option to a select box in the form etc. You define a button as a no submit button as in the example below (in ",(0,n.jsx)(t.code,{children:"definition()"}),"). This example adds a text box and a submit button in a group."]}),"\n",(0,n.jsx)(t.h2,{id:"form-definition",children:"Form definition"}),"\n",(0,n.jsxs)(t.p,{children:["When defining your form, you will need to call the ",(0,n.jsx)(t.code,{children:"registerNoSubmitButton()"})," function with the name of the submit button mark as a non-submission button, for example:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-php",children:"$mform->registerNoSubmitButton('addtags');\n$tags = [\n    $mform->createElement('text', 'tagsadd', get_string('addtags', 'blog')),\n    $mform->createElement('submit', 'addtags', get_string('add')),\n];\n$mform->addGroup($tags, 'tagsgroup', get_string('addtags','blog'), [' '], false);\n$mform->setType('tagsadd', PARAM_NOTAGS);\n"})}),"\n",(0,n.jsx)(t.h2,{id:"form-handling",children:"Form handling"}),"\n",(0,n.jsxs)(t.p,{children:["When handling a no-submit button press you will need to check whether any no-submit button as pressed ",(0,n.jsx)(t.em,{children:"before"})," checking for submitted data. For example:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-php",children:"$mform = new \\plugintype_pluginname\\form\\my_form();\n$mform->set_data($toform);\n\nif ($mform->is_cancelled()){\n    // If you have a cancel button on your form then you will need\n    // to handle the cancel action here according to the\n    // requirements of your plugin\n} else if ($mform->no_submit_button_pressed()) {\n    // If you have a no-submit button on your form, then you can handle that action here.\n    $data = $mform->get_submitted_data();\n} else if ($fromform = $mform->data_submitted()){\n    // This branch is where you process validated data.\n} else {\n    // The form has not been submitted, or was unsuccessfully submitted.\n}\n"})}),"\n",(0,n.jsxs)(t.admonition,{title:"Modifying your form in a no-submit action",type:"important",children:[(0,n.jsx)(t.p,{children:"Because the check for a no-submit button press takes place on the defined form, the form is already defined at the point that it is checked."}),(0,n.jsx)(t.p,{children:"If you wish to add or modify elements or options in your form, then may need to use methods on MoodleQuickForm to redefine your form elements."})]})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}}}]);