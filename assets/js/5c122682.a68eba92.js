"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[84504],{98508:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>h});var n=o(74848),s=o(28453),a=o(78924);const i={title:"Continuous Integration for the Moodle App",sidebar_label:"Continuous Integration",sidebar_position:3,tags:["Quality Assurance","Testing","CI","Continuous Integration","Behat","Moodle App"]},l=void 0,r={id:"app/development/testing/continuous-integration",title:"Continuous Integration for the Moodle App",description:"Tests can be useful during development, but a good test suite really shines with CI processes in place. Running tests and other checks on a regular basis can be helpful to maintain good quality assurance, and catch regressions as early as possible.",source:"@site/general/app/development/testing/continuous-integration.md",sourceDirName:"app/development/testing",slug:"/app/development/testing/continuous-integration",permalink:"/moodledevdocs/general/app/development/testing/continuous-integration",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/general/app/development/testing/continuous-integration.md",tags:[{label:"Quality Assurance",permalink:"/moodledevdocs/general/tags/quality-assurance"},{label:"Testing",permalink:"/moodledevdocs/general/tags/testing"},{label:"CI",permalink:"/moodledevdocs/general/tags/ci"},{label:"Continuous Integration",permalink:"/moodledevdocs/general/tags/continuous-integration"},{label:"Behat",permalink:"/moodledevdocs/general/tags/behat"},{label:"Moodle App",permalink:"/moodledevdocs/general/tags/moodle-app"}],version:"current",lastUpdatedBy:"Noel De Martin",lastUpdatedAt:171938779e4,sidebarPosition:3,frontMatter:{title:"Continuous Integration for the Moodle App",sidebar_label:"Continuous Integration",sidebar_position:3,tags:["Quality Assurance","Testing","CI","Continuous Integration","Behat","Moodle App"]},sidebar:"moodleapp",previous:{title:"Acceptance testing",permalink:"/moodledevdocs/general/app/development/testing/acceptance-testing"},next:{title:"FAQ",permalink:"/moodledevdocs/general/app/faq"}},d={},h=[{value:"Plugin tests",id:"plugin-tests",level:2},{value:"Core tests",id:"core-tests",level:2},{value:"What can I do if my changes in core are making the app tests fail?",id:"what-can-i-do-if-my-changes-in-core-are-making-the-app-tests-fail",level:3}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{frontMatter:i,metadata:r}),"\n",(0,n.jsx)(t.p,{children:"Tests can be useful during development, but a good test suite really shines with CI processes in place. Running tests and other checks on a regular basis can be helpful to maintain good quality assurance, and catch regressions as early as possible."}),"\n",(0,n.jsx)(t.p,{children:"In this page we'll discuss some of the techniques and tools you can use to test any code impacting the Moodle App."}),"\n",(0,n.jsx)(t.h2,{id:"plugin-tests",children:"Plugin tests"}),"\n",(0,n.jsxs)(t.p,{children:["For most use-cases, you should be able to use ",(0,n.jsx)(t.a,{href:"https://github.com/moodlehq/moodle-plugin-ci",children:"moodle-plugin-ci"}),". There is already some extensive documentation in the official docs, and in particular you should take a look in the ",(0,n.jsx)(t.a,{href:"https://moodlehq.github.io/moodle-plugin-ci/MoodleApp.html",children:"Moodle App section"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["In practice, you'll most likely be able to use it out of the box by setting ",(0,n.jsx)(t.code,{children:"MOODLE_APP=true"}),", and using one of the templates for ",(0,n.jsx)(t.a,{href:"https://moodlehq.github.io/moodle-plugin-ci/GHAFileExplained.html",children:"Github Actions"})," or ",(0,n.jsx)(t.a,{href:"https://moodlehq.github.io/moodle-plugin-ci/TravisFileExplained.html",children:"Travis"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"core-tests",children:"Core tests"}),"\n",(0,n.jsxs)(t.p,{children:["For any new feature going into Moodle, the entire suite of app tests is run to make sure that nothing is broken. You can find the suite used for these purposes in the ",(0,n.jsx)(t.code,{children:"ci"})," branch of the ",(0,n.jsx)(t.a,{href:"https://github.com/moodlehq/moodle-local_moodleappbehat",children:"local_moodleappbehat"})," plugin repository. These tests will always be run against the ",(0,n.jsx)(t.code,{children:"latest"})," version of the app, which is the most recent release and should help us catch any regressions before it's too late. This happens in the Jenkins instance hosted in ",(0,n.jsx)(t.code,{children:"ci.moodle.org"})," (which uses ",(0,n.jsx)(t.a,{href:"https://github.com/moodlehq/moodle-ci-runner",children:"moodle-ci-runner"})," under the hood, but you probably won't need to interact with this in any way)."]}),"\n",(0,n.jsxs)(t.p,{children:["Even though the tests are mirrored into the ",(0,n.jsx)(t.code,{children:"local_moodleappbehat"})," repository, their source is managed in the main Moodle App repository. These tests are also run every time anything changes in the app codebase, using Github Actions. The workflow configuration can be found in ",(0,n.jsx)(t.a,{href:"https://github.com/moodlehq/moodleapp/blob/main/.github/workflows/acceptance.yml",children:"acceptance.yml"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"what-can-i-do-if-my-changes-in-core-are-making-the-app-tests-fail",children:"What can I do if my changes in core are making the app tests fail?"}),"\n",(0,n.jsx)(t.p,{children:"You can look at the failure logs, and hopefully that will give you enough hints to understand what's happening. For more details, you can also check the Build Artifacts to find screenshots of the application when the tests failed."}),"\n",(0,n.jsxs)(t.p,{children:["If that's not clear enough, try to use the app against your local instance to see if you can reproduce the problem (you can use the ",(0,n.jsx)(t.a,{href:"/moodledevdocs/general/app/development/network-debug#using-a-browser",children:"development webapps"})," in your computer). You can also run the app tests in your development machine ",(0,n.jsx)(t.a,{href:"./acceptance-testing",children:"following the documentation"})," (make sure to use the ",(0,n.jsx)(t.code,{children:"ci"})," branch of the ",(0,n.jsx)(t.code,{children:"local_moodleappbehat"})," plugin to include the tests)."]}),"\n",(0,n.jsx)(t.p,{children:"Also, make sure your moodle code is up to date with the latest changes. The application tests are working against the latest development version of the LMS, so if your fork is using an old version it's possible that the problem has been fixed upstream."}),"\n",(0,n.jsxs)(t.p,{children:["If you're still unable to find why the tests are failing, you can reach out for help in the ",(0,n.jsx)(t.a,{href:"/moodledevdocs/general/channels#developer-chat",children:"developer chat"})," or ask anyone from the ",(0,n.jsx)(t.a,{href:"https://tracker.moodle.org/issues/?jql=assignee%20in%20(membersOf(mobile-developers))",children:"mobile developers"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Finally, if you've made sure that the application is working properly but the Behats tests need to change, also reach out the ",(0,n.jsx)(t.a,{href:"https://tracker.moodle.org/issues/?jql=assignee%20in%20(membersOf(mobile-developers))",children:"mobile developers"}),". Tests can be skipped temporarily before an issue is integrated, and updated to conform with the new behaviour afterwards."]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);