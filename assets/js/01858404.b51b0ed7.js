"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[28883],{54674:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=t(74848),l=t(28453),n=t(78924);const r={title:"File Browser API",tags:["File API","Files"]},o=void 0,a={id:"apis/subsystems/files/browsing",title:"File Browser API",description:"The File Browser API is a supplemental API which can be used to fetch information relating to Files stored in the Moodle File API.",source:"@site/docs/apis/subsystems/files/browsing.md",sourceDirName:"apis/subsystems/files",slug:"/apis/subsystems/files/browsing",permalink:"/moodledevdocs/docs/4.4/apis/subsystems/files/browsing",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/docs/apis/subsystems/files/browsing.md",tags:[{label:"File API",permalink:"/moodledevdocs/docs/4.4/tags/file-api"},{label:"Files",permalink:"/moodledevdocs/docs/4.4/tags/files"}],version:"current",lastUpdatedBy:"Andrew Nicols",lastUpdatedAt:1651118584e3,frontMatter:{title:"File Browser API",tags:["File API","Files"]},sidebar:"docs",previous:{title:"File API",permalink:"/moodledevdocs/docs/4.4/apis/subsystems/files/"},next:{title:"File Converters",permalink:"/moodledevdocs/docs/4.4/apis/subsystems/files/converter"}},d={},c=[{value:"Fetch a series of breadcrumbs to the requested file",id:"fetch-a-series-of-breadcrumbs-to-the-requested-file",level:3}];function f(e){const s={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.A,{frontMatter:r,metadata:a}),"\n",(0,i.jsxs)(s.p,{children:["The File Browser API is a supplemental API which can be used to fetch information relating to Files stored in the ",(0,i.jsx)(s.a,{href:"/moodledevdocs/docs/4.4/apis/subsystems/files/",children:"Moodle File API"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"fetch-a-series-of-breadcrumbs-to-the-requested-file",children:"Fetch a series of breadcrumbs to the requested file"}),"\n",(0,i.jsxs)(s.p,{children:["This example demonstrates using the ",(0,i.jsx)(s.code,{children:"filebrowser"})," API to fetch the parent folders of a file."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-php",children:"public function get_file_breadcrumbs(\\stored_file $file): ?array {\n    $browser = get_file_browser();\n    $context = get_system_context();\n\n    $fileinfo = $browser->get_file_info(\n        \\context::instance_by_id($file->get_contextid()),\n        $file->get_component(),\n        $file->get_filearea(),\n        $file->get_itemid(),\n        $file->get_filepath(),\n        $file->get_filename()\n    )\n\n    if ($fileinfo) {\n        // Build a Breadcrumb trail\n        $level = $fileinfo->get_parent();\n        while ($level) {\n            $path[] = [\n                'name' => $level->get_visible_name(),\n            ];\n            $level = $level->get_parent();\n        }\n\n        $path = array_reverse($path);\n\n        return $path;\n    }\n\n    return null;\n}\n"})})]})}function p(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}}}]);