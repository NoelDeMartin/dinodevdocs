"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[87604],{9345:(e,s,n)=>{n.d(s,{ex:()=>u,U1:()=>p});n(96540);var i=n(81090),t=n(41690),r=n(59223),o=n(89229),l=n(93425),d=n(74848);function a(e){return e.githubUsername?(0,d.jsxs)(t.Ay,{alignItems:"flex-start",children:[(0,d.jsx)(r.A,{children:(0,d.jsx)(o.A,{src:`https://avatars.githubusercontent.com/${e.githubUsername}`})}),(0,d.jsx)(i.A,{to:`https://github.com/${e.githubUsername}`,children:(0,d.jsx)(l.A,{primary:e.name,secondary:e.githubUsername})})]},e.key):(0,d.jsx)(d.Fragment,{children:e.name})}const c={projectsummary:"projectsummary_VN1v"};var m=n(28820);function u(e){function s(e){let{status:s}=e;return(0,d.jsx)(d.Fragment,{children:s})}function n(e){let{owners:s}=e;return s?(0,d.jsx)(m.A,{children:s}):null}return t=p(e.projectName),(0,d.jsx)("div",{className:c.projectsummary,children:(0,d.jsx)("table",{children:(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Owners"}),(0,d.jsx)("td",{children:n(t)})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("td",{children:s(t)})]}),t.discussionLinks?.length>0&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Links"}),(0,d.jsx)("td",{children:t.discussionLinks.map((e=>{let{link:s,title:n}=e;return(0,d.jsx)("div",{children:(0,d.jsx)(i.A,{to:s,children:n})},n)}))})]}),t.issueLinks?.length>0&&(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Issues"}),(0,d.jsx)("td",{children:t.issueLinks.map((e=>{let{link:s,title:n}=e;return(0,d.jsx)("div",{children:(0,d.jsx)(i.A,{to:s,children:n})},n)}))})]})]})})});var t}const h=JSON.parse('{"d":{"docs/migration":{"title":"Dev Docs Migration","status":"In Progress","owners":[{"name":"Andrew Lyons","githubUsername":"andrewnicols"},{"name":"Sara Arjona","githubUsername":"sarjona"}],"discussionLinks":[{"link":"https://moodle.org/mod/forum/discuss.php?d=433613","title":"Announcement"}]},"api/string-deprecation":{"title":"String deprecation","status":"Complete","owners":[{"name":"Marina Glancy","githubUsername":"marinaglancy"}],"issueLinks":[{"link":"https://tracker.moodle.org/browse/MDL-46585","title":"MDL-46585"}]},"api/admin-tools":{"title":"Admin tools","status":"Complete","owners":[{"name":"Petr \u0160koda","githubUsername":"\u0161ko\u010f\xe1k"}],"issueLinks":[{"link":"https://tracker.moodle.org/browse/MDL-29029","title":"MDL-29029"}]},"api/amos":{"title":"Automated Manipulation of Strings (AMOS)","status":"Complete","owners":[{"name":"David Mudrak","githubUsername":"mudrd8mz"}],"discussionLinks":[{"link":"http://moodle.org/mod/forum/discuss.php?d=118707#p542197","title":"Discussion"}],"issueLinks":[{"link":"https://tracker.moodle.org/browse/MDL-18797","title":"MDL-18797"}]},"code/block-cleanup":{"title":"Block Cleanup","status":"Complete","owners":[{"name":"Sara Arjona","githubUsername":"sarjona"}],"discussionLinks":[{"link":"https://moodle.org/mod/forum/discuss.php?d=429959","title":"Discussion"}],"issueLinks":[{"link":"https://tracker.moodle.org/browse/MDL-73299","title":"MDL-73299"}]}}}'),p=e=>{if(!h.d[e])throw new Error(`Unknown project ${e}`);const s=h.d[e];return{projectName:e,title:s.title,owners:s.owners.map((e=>{return s=e,(0,d.jsx)("div",{children:a(s)},`Person:${s.name}`);var s})),status:s.status,issueLinks:s.issueLinks,discussionLinks:s.discussionLinks}}},23336:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>m});var i=n(74848),t=n(28453),r=n(78924),o=n(9345);const l={title:"Admin tools",tags:["Plugins","Admin"]},d=void 0,a={id:"projects/api/admin-tools",title:"Admin tools",description:"<ProjectSummary",source:"@site/general/projects/api/admin-tools.md",sourceDirName:"projects/api",slug:"/projects/api/admin-tools",permalink:"/moodledevdocs/general/projects/api/admin-tools",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/general/projects/api/admin-tools.md",tags:[{label:"Plugins",permalink:"/moodledevdocs/general/tags/plugins"},{label:"Admin",permalink:"/moodledevdocs/general/tags/admin"}],version:"current",lastUpdatedBy:"Andrew Nicols",lastUpdatedAt:1713332374e3,frontMatter:{title:"Admin tools",tags:["Plugins","Admin"]},sidebar:"projects",previous:{title:"String deprecation",permalink:"/moodledevdocs/general/projects/api/string-deprecation"},next:{title:"AMOS",permalink:"/moodledevdocs/general/projects/api/amos"}},c={},m=[{value:"Previous problems",id:"previous-problems",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Upgrades",id:"upgrades",level:2},{value:"FAQs",id:"faqs",level:2},{value:"See also",id:"see-also",level:2}];function u(e){const s={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Since:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Since",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{frontMatter:l,metadata:a}),"\n","\n",(0,i.jsx)(n,{versions:["2.2"],issueNumber:"MDL-57898"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(o.ex,{projectName:"api/admin-tools"}),"\n",(0,i.jsxs)(s.p,{children:["Admin tools are advanced plugins that are intended especially for site administrators, they are accessible via the admin site administration tree menu. Ideally most of the functionality in ",(0,i.jsx)(s.code,{children:"/admin/"})," directory should be moved to separate plugins in the future."]}),"\n",(0,i.jsx)(s.h2,{id:"previous-problems",children:"Previous problems"}),"\n",(0,i.jsxs)(s.p,{children:["Before 2.2, tools for administrators were created as admin reports (because we did not have better pluggable place), placed directly into ",(0,i.jsx)(s.code,{children:"/admin/"})," or ",(0,i.jsx)(s.code,{children:"/local/ directory"}),"."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Confusing ",(0,i.jsx)(s.code,{children:"/admin/report/"})," or ",(0,i.jsx)(s.code,{children:"/local/ plugins"})]}),"\n",(0,i.jsx)(s.li,{children:"No way to disable or remove or add custom admin tools"}),"\n",(0,i.jsxs)(s.li,{children:["The official distribution should not include local plugins by definition (",(0,i.jsx)(s.code,{children:"/local/qeupgradehelper"}),")."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"benefits",children:"Benefits"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Major cleanup in ",(0,i.jsx)(s.code,{children:"/admin/"})]}),"\n",(0,i.jsx)(s.li,{children:"No need to abuse admin reports"}),"\n",(0,i.jsx)(s.li,{children:"Contrib admin tools can be distributed easier"}),"\n",(0,i.jsx)(s.li,{children:"It is possible to remove or replace core admin tools (no hardcoded links)"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"upgrades",children:"Upgrades"}),"\n",(0,i.jsx)(s.p,{children:"How to migrate existing admin reports:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Move all files to new ",(0,i.jsx)(s.code,{children:"/admin/tool/yourplugin/"})," location"]}),"\n",(0,i.jsxs)(s.li,{children:["Update all links to admin tools ",(0,i.jsx)(s.code,{children:"/admin/report/"})," to ",(0,i.jsx)(s.code,{children:"/admin/tool/"})]}),"\n",(0,i.jsxs)(s.li,{children:["Rename/add language pack file with at least ",(0,i.jsx)(s.code,{children:"pluginname"})," string"]}),"\n",(0,i.jsxs)(s.li,{children:["Update all language strings (use ",(0,i.jsx)(s.code,{children:"tool_yourplugin"})," instead of ",(0,i.jsx)(s.code,{children:"report_yourplugin"}),". Use ",(0,i.jsx)(s.a,{href:"https://docs.moodle.org/dev/Languages/AMOS",children:"AMOS"})," hints in commit message"]}),"\n",(0,i.jsx)(s.li,{children:"Update all capability names"}),"\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"db/install.php"})," migration script. Delete old settings and capabilities (see converted plugins for examples)"]}),"\n",(0,i.jsxs)(s.li,{children:["Grep the plugin codebase and look for any remaining ",(0,i.jsx)(s.code,{children:"coursereport"})," occurrences"]}),"\n",(0,i.jsx)(s.li,{children:"Update CSS selectors"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"faqs",children:"FAQs"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Is it necessary to migrate existing admin reports?"}),(0,i.jsx)("br",{}),"\nYes. Old admin reports directory is completely ignored."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Is it difficult to migrate admin reports?"}),(0,i.jsx)("br",{}),"\nNo, it usually takes less than an hour to migrate and test one admin tool."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"What is the difference between report and admin tool?"}),(0,i.jsx)("br",{}),"\nReport is a view of live or historical data, it may also contain export feature, reports usually do not modify data. Admin tools are intended mostly for administrators, they usually work only in system context."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"What is the difference between admin tool and local plugin?"}),(0,i.jsx)("br",{}),"\nLocal plugin is everything else, it may be intended for non-admin users. Examples of local plugins: event handlers, web service/function definitions, shared library hacks, new lang strings used in core hacks, etc."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"see-also",children:"See also"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.moodle.org/dev/General_report_plugins",children:"General report plugins"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);