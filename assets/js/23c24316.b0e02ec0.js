"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[28791],{51469:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var s=i(74848),l=i(28453),t=i(78924);const o={title:"Linting and other checks",tags:["linting","contributing","documentation"],sidebar_position:5},r=void 0,d={id:"documentation/linting",title:"Linting and other checks",description:"In order to keep the quality of the documentation as high as possible, we perform a range of linting and spelling checks. These include:",source:"@site/general/documentation/linting.md",sourceDirName:"documentation",slug:"/documentation/linting",permalink:"/moodledevdocs/general/documentation/linting",draft:!1,unlisted:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/general/documentation/linting.md",tags:[{label:"linting",permalink:"/moodledevdocs/general/tags/linting"},{label:"contributing",permalink:"/moodledevdocs/general/tags/contributing"},{label:"documentation",permalink:"/moodledevdocs/general/tags/documentation"}],version:"current",lastUpdatedBy:"Andrew Nicols",lastUpdatedAt:1657628798e3,sidebarPosition:5,frontMatter:{title:"Linting and other checks",tags:["linting","contributing","documentation"],sidebar_position:5},sidebar:"documentation",previous:{title:"Structure",permalink:"/moodledevdocs/general/documentation/structure"},next:{title:"Style guides",permalink:"/moodledevdocs/general/documentation/style-guides"}},a={},c=[{value:"Spelling",id:"spelling",level:2},{value:"Spelling lists",id:"spelling-lists",level:3},{value:"Contributors",id:"contributors",level:4},{value:"Component and plugin types",id:"component-and-plugin-types",level:4},{value:"Plugin names",id:"plugin-names",level:4},{value:"Project words",id:"project-words",level:4},{value:"Markdown Checks",id:"markdown-checks",level:2},{value:"Ignoring lint issues",id:"ignoring-lint-issues",level:3},{value:"Broken link checks",id:"broken-link-checks",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.A,{frontMatter:o,metadata:d}),"\n",(0,s.jsx)(n.p,{children:"In order to keep the quality of the documentation as high as possible, we perform a range of linting and spelling checks. These include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["spelling checks using ",(0,s.jsx)(n.a,{href:"https://cspell.org/",children:"CSpell"})]}),"\n",(0,s.jsxs)(n.li,{children:["markdown validity checks using ",(0,s.jsx)(n.a,{href:"https://github.com/DavidAnson/markdownlint-cli2",children:"markdownlint-cli2"})]}),"\n",(0,s.jsxs)(n.li,{children:["JavaScript and TypeScript coding style using ",(0,s.jsx)(n.a,{href:"https://eslint.org/",children:"eslint"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Helper scripts are included to make this easier and, where possible, to automatically fix issues."}),"\n",(0,s.jsx)(n.p,{children:"We also attempt to perform these as pre-commit checks which prevent your from commit invalid changes."}),"\n",(0,s.jsx)(n.h2,{id:"spelling",children:"Spelling"}),"\n",(0,s.jsxs)(n.p,{children:["All documentation is checked using ",(0,s.jsx)(n.a,{href:"https://cspell.org",children:"CSpell"})," against the en-GB dictionary."]}),"\n",(0,s.jsx)(n.p,{children:"A number of additional dictionaries are also included:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#contributors",children:"Moodle contributors"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#component-and-plugin-types",children:"Moodle component and plugin types"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#plugin-names",children:"Plugin names"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#project-words",children:"Project words"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Where you encounter such a spelling and need it to be ignored, you should either:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ignore the spelling within the current file; or"}),"\n",(0,s.jsx)(n.li,{children:"add it as a valid spelling across the entire repository."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"To ignore a spelling error within a single file, you can use an HTML comment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="Ignoring a single word"',children:"\x3c!-- cspell:ignore yourword --\x3e\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can ignore multiple words in the same comment by separating them with a comma, for example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="Ignoring multiple words"',children:"\x3c!-- cspell:ignore yourword,goeshere --\x3e\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If the word you are using is a word which will be frequently used across the project, then you should add it to the relevant ",(0,s.jsx)(n.a,{href:"#spelling-lists",children:"spelling list"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"spelling-lists",children:"Spelling lists"}),"\n",(0,s.jsx)(n.h4,{id:"contributors",children:"Contributors"}),"\n",(0,s.jsxs)(n.p,{children:["A list of ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/blob/main/data/moodle-contributors.txt",children:"Moodle Contributors"})," is compiled from the Moodle git repository. This allows you use the name of any contributor in the documentation without any errors being generated."]}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsxs)(n.p,{children:["This list is automatically updated once per week, after the ",(0,s.jsx)(n.a,{href:"/moodledevdocs/general/development/process/integration/#in-normal-periods",children:"weekly release"}),"."]}),(0,s.jsxs)(n.p,{children:["This list ",(0,s.jsx)(n.strong,{children:"should not"})," be updated manually."]})]}),"\n",(0,s.jsx)(n.h4,{id:"component-and-plugin-types",children:"Component and plugin types"}),"\n",(0,s.jsxs)(n.p,{children:["A list of all ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/blob/main/data/components-spelling.txt",children:"Moodle Component types and plugin types"})," is compiled from the Moodle git repository."]}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsxs)(n.p,{children:["This list is automatically updated once per week, after the ",(0,s.jsx)(n.a,{href:"/moodledevdocs/general/development/process/integration/#in-normal-periods",children:"weekly release"}),"."]}),(0,s.jsxs)(n.p,{children:["This list ",(0,s.jsx)(n.strong,{children:"should not"})," be updated manually."]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["This list does not currently include the complete list of plugins. If you need to mention a plugin whose name is not a valid spelling, you will currently need to manually add this to the ",(0,s.jsx)(n.a,{href:"#plugin-names",children:"plugin names"})," list."]}),(0,s.jsxs)(n.p,{children:["This will be included at a later date. See ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/issues/282",children:"#282"})," for more information."]})]}),"\n",(0,s.jsx)(n.h4,{id:"plugin-names",children:"Plugin names"}),"\n",(0,s.jsxs)(n.p,{children:["Plugin names are currently ",(0,s.jsx)(n.em,{children:"not"})," generated automatically (but will be in the future). As a result, if you need to specify a plugin which does not have a valid spelling then it should be added to the ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/blob/main/data/plugin-names.txt",children:"manually-controlled list of spellings"}),"."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["Moodle core plugins will be automatically generated in future. See ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/issues/282",children:"#282"}),"."]}),(0,s.jsx)(n.p,{children:"This file will be kept for third-party plugins."})]}),"\n",(0,s.jsx)(n.h4,{id:"project-words",children:"Project words"}),"\n",(0,s.jsx)(n.p,{children:"In many situations we use words which are not 'real' words. This could be because they are concatenations of words, abbreviations, Moodle-isms, people's names, the names of organisations, or a host of other reasons."}),"\n",(0,s.jsxs)(n.p,{children:["For any words which does not fit into the above categories, you can place it into the ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/blob/main/project-words.txt",children:"project-words.txt"})," file."]}),"\n",(0,s.jsx)(n.h2,{id:"markdown-checks",children:"Markdown Checks"}),"\n",(0,s.jsxs)(n.p,{children:["We make use of ",(0,s.jsx)(n.a,{href:"https://github.com/DavidAnson/markdownlint-cli2",children:"markdownlint-cli2"})," to run a number of style and validation checks on all files with both the ",(0,s.jsx)(n.code,{children:".md"})," and ",(0,s.jsx)(n.code,{children:".mdx"})," file extensions."]}),"\n",(0,s.jsxs)(n.p,{children:["These checks cover both standard rules, and several ",(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint",children:"custom rules"})," with examples including:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"header levels which do not increase incrementally"}),"\n",(0,s.jsxs)(n.li,{children:["multiple level 1 headers (",(0,s.jsx)(n.code,{children:"h1"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"use of hard tabs instead of spaces"}),"\n",(0,s.jsx)(n.li,{children:"the presence of trailing spaces at the end of a line"}),"\n",(0,s.jsx)(n.li,{children:"spaces around some markdown objects"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint/no-directional-quotation-marks.js",children:"conversion of directional quotation marks"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint/find-obsolete-links.js",children:"checking for links to pages marked as obsolete in the legacy documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint/fix-migrated-links.js",children:"checking and fixing of links to pages marked as migrated in the legacy documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint/fix-renamed-links.js",children:"checking and fixing of links to pages which have been moved internally"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/moodle/devdocs/tree/main/.markdownlint/cased-words.js",children:"checking and fixing of several common trademarks"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Whenever you make changes to the documentation, we strongly recommend running yarn fix to check that all markdown files meet our standards, fix any issues (including updating links to migrated pages), and are free from spelling mistakes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"yarn fix\n"})}),"\n",(0,s.jsx)(n.p,{children:"This command will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Run our standard linting rules against all markdown and mdx files"}),"\n",(0,s.jsx)(n.li,{children:"Automatically fix any warnings which can be automatically fixed"}),"\n",(0,s.jsx)(n.li,{children:"Report any warnings which could not be fixed"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This command should be extremely fast to run, but you may also wish to check just one file. You can do using the ",(0,s.jsx)(n.code,{children:"yarn mdlint [path/to/file]"})," command, for example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",metastring:'title="Lint just the general/documentation/linting.md file"',children:"yarn lint general/documentation/linting.md\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ignoring-lint-issues",children:"Ignoring lint issues"}),"\n",(0,s.jsx)(n.p,{children:"Although it should rarely happen, you will occasinoally need to ignore markdownlint failures instead of fixing them."}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"https://github.com/DavidAnson/markdownlint#configuration",children:"markdownlint documentation"})," for examples of the different syntax available to do this."]}),"\n",(0,s.jsx)(n.h2,{id:"broken-link-checks",children:"Broken link checks"}),"\n",(0,s.jsx)(n.p,{children:"When we build the documentation using Docusaurus, the build system checks for any broken internal links."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"yarn build\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"This test is slightly slower to run, and we recommend that you run it as the final check before you push."})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);